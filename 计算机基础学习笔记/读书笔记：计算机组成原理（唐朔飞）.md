---
title: 读书笔记：计算机组成原理（唐朔飞）
date: 2019-11-30 22:38:03
tags: 读书笔记
categories: 计算机底层原理
---

（注1：和计算机网络笔记一样，主要精力放在前端上，这个是作为扩展，而且自己本来也没有太多时间学这个了，毕竟找工作要紧，所以笔记做得并不详细，几乎全是抄书，主要是给自己有个印象，因为自己发现如果光看书不记笔记效果不好，而且也有点看不下去，记了笔记起码会认真看一点，用的是图片文字识别软件）

# 第一章：计算机系统概论

## 计算机系统简介

### 计算机的软硬件概念

计算机系统由“**硬件**”和“**软件**”两大部分组成。

所谓**“硬件”**即指计算机的**实体**部分，它由看得见摸得着的各种电子元器件、各类光、电、机设备的**实物组成**，如主机、外设等等。

所谓**“软件”**，它是看不见摸不着的，由人们事先编制成具有各类特殊功能的**信息组成**。通常把这些信息，诸如各类程序寄寓于各类媒体中，如RAM、ROM、磁带、磁盘、光盘、甚至纸带等。它们通常被作为计算机的主存或辅存的内容。由于“软件”的发展，它不仅可以充分发挥计算机的“硬件”功能，提高计算机的工作效率，而且已经发展到能局部模拟人类的思维活动，因此在整个计算机系统内，“软件”的地位和作用已经成为评价计算机系统性能好坏的重要标志。当然，“软件”性能的发挥，也必须依托“硬件”的支撑。因此，概括而言，计算机性能的好坏，取决于“软”、“硬”件功能的**总和**。

计算机的软件通常又可以分为两大类：系统软件和应用软件。

系统软件又称为系统程序，主要用来管理整个计算机系统，监视服务，使系统资源得到合理调度，确保高效运行。它包括：标准程序库、语言处理程序（如将汇编语言翻译成机器语言的汇编程序；将高级语言翻译成机器语言的编译程序）、操作系统（如批处理系统、分时系统、实时系统）、服务性程序（如诊断程序、调试程序、连接程序等）、数据库管理系统、网络软件等等。

应用软件又称为应用程序，它是用户根据任务需要所编制的各种程序。如科学计算程序，数据处理程序，过程控制程序，事务管理程序等等。

### 计算机系统的层次结构

​	

现代计算机的解题过程通常是先由用户用高级语言编写程序（称作源程序），然后将它和数据一起送入计算机内，再由计算机将其翻译成机器能识别的机器语言程序（称作目标程序），机器自动运行该机器语言程序，并将计算结果输出。其过程如图1.1所示。

![01](读书笔记：计算机组成原理(唐朔飞)/01.png)

实际上，早期的计算机只有机器语言（即用0/1代码表示的语言），用户必须用二进制0/l代码来编写程序（即机器语言程序）。这就要求程序员对他们所使用的计算机的硬件及指令系统I分熟悉，编写程序难度很大，操作过程也极容易出错。但用户编写的机器语言程序，可以直接在机器上执行，我们把直接执行机器语言的实际机器称M1，如图1.2所示。

![02](读书笔记：计算机组成原理(唐朔飞)/02.png)

20世纪50年代开始出现了符号式的程序设计语言，即汇编语言。它用符号ADD、SUB、MUL、DIV等分别表示作加、减、乘、除等操作，并用符号表示指令或数据所在存储空间的地址，这就使程序员摆脱了用繁杂而又易错的二进制代码编写程序。但是，实际上没有一种机器能直接识别这种汇编语言程序，必须先将汇编语言程序翻详成机器语言程序后，才能被机器接受并自动运行。这个翻译过程是由机器系统软件中的汇编程序来完成的。如果我们把具有翻译功能的汇编程序的计算机看作一台M2机器，那么，可以认为M2在M1之上，用户可以利用M，的翻译功能直接向M2输入汇编语言程序，而M2又会将翻译后的机器语言程序输入给M1，M执行后将结果交付给人们。因此，M2并不是一台实际机器，它只是人们感到存在的一台具有翻译功能的机器，称这类机器为虚拟机。这样，整个计算机系统便具有两级层次结构，如图1.3所示。
尽管有了虚拟机M，使用户编程更为方便，但从本质上看，汇编语言仍是一种面向实际机器的语言，它的每一条语句都与机器语言的某一条语句（0/1代码）一一对应。因此，使用汇编语言编写程序时，仍要求程序员对实际机器M1的内部组成和指令系统非常熟悉，也就是说，程序员必须经过专门的训练，否则是无法操作计算机的。另一方面，由于汇编语言摆脱不了实际机器的指令系统，因此，汇编语言没有通用性，每台机器必须有一种与之相对应的汇编语言。这就大大阻碍了计算机的广泛使用

![03](读书笔记：计算机组成原理(唐朔飞)/03.png)

20世纪60年代开始出现了各种面向问题的高级语言，如FORTRAN、BASIC、Pascal、C等等。这类高级语言对问题的描述十分接近人们的习惯，并且还具有较强的通用性。程序员完全可以不必了解掌握实际机器M1的机型、内部的具体组成及其自身的指令系统，只要掌握这类高级语言本身所赋予的语法和语义，便可直接用这种高级语言来编程，这给程序员带来了极大的方便。当然，M1机器本身是不能识别高级语言的，因此，在进入M；机器运行前，必须先将高级语言程序翻译成汇编语言程序（或其他中间语言程序），然后再将其翻译成机器语言程序。也可以将高级语言程序直接翻译成机器语言程序。这些工作都是由虚拟机器M，来完成的，对程序员而言，他们并不知道这个翻译过程。由此我们又可得出具有三级层次结构的计算机系统，如图1.4所示。

![04](读书笔记：计算机组成原理(唐朔飞)/04.png)

通常，我们把高级语言程序翻译成机器语言程序的软件叫做翻译程序。翻译程序有两种：一种叫**编译程序**，另一种叫**解释程序**。

**编译程序**将用户编写的高级语言程序（即源程序）的全部语句一次全部翻译成机器语言程序，而后再执行机器语言程序。因此，只要源程序不变，就无需再次进行翻译。如FORTRAN、PASCAL等语言，就是用编译程序来完成翻译的。

**解释程序**是将源程序的一条语句翻译成对应于机器语言的一条语句，并且立即执行这条语句，接着再翻译源程序的下一条语句，并执行这条语句，如此重复直至完成源程序的全部翻译任务。它的特点是翻译一次执行一次，即使下一次重复执行该语句时，也必须重新翻译。如BASIC语言的翻译就有解释程序和编译程序两种。

从上述介绍不难看出，由于软件的发展，使实际机器M1向上延伸构成了各级虚拟机器。同理M1机器内部也可向下延伸而形成下一级的微程序机器Moe Mo机器是直接将M1机器中的每一条机器指令翻译成一组微指令，即构成一个微程序。Mo机器每执行完对应于一条机器指令的一个微程序后，便由M机器中的下一条机器指令，使M。机器自动进入与其相对应的另一个微程序的执行。由此可见，微程序机器M。可看作是对实际机器M，的分解，即用Mo的微程序解释并执行M，的每一条机器指令（有关微程序机器的介绍，详见第十章）。由于M。机器也是**实际机器**，因此，为了区别于M1，通常又将M1叫做传统机器，将M。叫做微程序机器。这样计算机系统又可认为具有四级层次结构，如图1.5所示。

![05](读书笔记：计算机组成原理(唐朔飞)/05.png)

在上述四级层次结构的系统中，实际上在实际机器M，与虚拟机器₂之间，还有一级虚拟机器，它是由操作系统软件构成的。操作系统提供了在汇编语言和高级语言的使用和实现过程中所需的某些基本操作，还起到控制并管理系统硬件和软件全部资源的作用，为用户使用计算机系统提供极为方便的条件。操作系统的功能是通过其控制语言来实现的。图1.6描绘了一个常见的五级计算机系统的层次结构。

![06](读书笔记：计算机组成原理(唐朔飞)/06.png)

从计算机系统的多级层次结构来看，可以将硬件研究的主要对象归结为传统机器M：和微程序机器Mo。软件的研究对象主要是操作系统级以上的各级虚拟机。值得指出的是，软硬件交界面的划分并不是一成不变的。随着超大规模集成电路技术的不断发展，一部份软件功能将由硬件来实现，如目前操作系统已实现了部份固化等等。可见，软、硬件交界面变化的趋势正沿着如图1.6所示的愈来愈向上的方向发展。
本教材主要讨论传统机器M和微程序机器M。的组成原理及设计思想，其他各级虚拟机的内容，均由相应的软件课程讲授。

### 计算机组成和计算机体系结构

感觉不重要

## 计算机的基本组成

### 冯·诺依曼计算机的特点

1945年数学家冯·诺依曼（von Neumann）等人，在研究EDVAC机时，提出了“存储程序”的概念。以此概念为基础的各类计算机，统称为冯·诺依曼机。它的特点可归结为：

* 计算机由运算器、存储器、控制器和输入设备、输出设备五大部件组成。

* 指令和数据以同等地位存放于存储器内，并可按地址寻访。

* 指令和数据均用二进制码表示。

* 指令由操作码和地址码组成，操作码用来表示操作的性质，地址码用来表示操作数所在存储器中的位置。
* 指令在存储器内按顺序存放。通常，指令是顺序执行的，在特定条件下，可根据运算结果或根据设定的条件改变执行顺序。
* 机器以运算器为中心，输入输出设备与存储器的数据传送通过运算器。

### 计算机的硬件框架

典型的冯·诺依曼计算机是以运算器为中心的，如图1.7所示。其中，输入、输出设备与存储器之间的数据传送都需通过运算器。图中实线为数据线，虚线为控制线和反馈线。

![07](读书笔记：计算机组成原理(唐朔飞)/07.png)

现代的计算机已转化为以存储器为中心，如图1.8所示。图中实线为控制线，虚线为反馈线，双线为数据线。

图中各部件的功能是：

* 运算器用来完成算术运算和逻辑运算，并将运算的中间结果暂存在运算器内；

* 存储器用来存放数据和程序；

* 控制器用来控制、指挥程序和数据的输入、运行以及处理运算结果；

* 输入设备用来将人们熟悉的信息形式转换为机器能识别的信息形式，常见的有键盘、鼠标等。

* 输出设备可将机器运算结果转换为人们熟悉的信息形式，如打印机输出、显示器输出等。

  ![08](读书笔记：计算机组成原理(唐朔飞)/08.png)

  计算机的五大部件（又称五大子系统）在控制器的统一指挥下，实现有条不紊地自动工作。

  由于**运算器和控制器**在逻辑关系和电路结构上联系十分紧密，尤其在大规模集成电路制作工艺出现后，这两大部件往往制作在同一芯片上，因此，通常将它们**合起来**统称为**中央处理器**（Central Processing Unit），简称CPU。把**输入设备与输出设备**简称为**I/O设备**（Input/Output equipment）。

  这样，现代计算机可认为由三大部分组成：**CPU、I/O设备及主存储器**M.M
  （Main Memory），如图1.9所示。CPU与M.M合起来又可称为主机，I/O设备可叫作外部设备。

  ![09](读书笔记：计算机组成原理(唐朔飞)/09.png)

  图1.9中的主存储器M.M是存储器子系统中的一类，用来存放程序和数据，它可以直接与CPU交换信息。另一类叫辅助存储器，简称辅存，又叫外存，其功能参阅4.4节。

  **ALU**（Arithmetic Logic Unit）叫做**算术逻辑运算单元**（简称算逻部件），用来完成算术逻辑运算。**CU**（Control Unit）叫做**控制单元**，用来解释存储器中的指令，并发出各种操作命令来执行指令。ALU和CU是CPU的核心部件。

  I/O设备也受CU控制，用来完成相应的输入、输出操作。

  可见，计算机有条不紊地自动工作，都是在**控制器统一指挥**下完成的。

### 计算机的工作过程

用计算机解决一个实际问题，通常包含两大过程。一个是上机前的各种准备，再一个是上机运行。

#### 上机前的准备

（1）建立数学模型

（2）确定计算方法

（3）编制解题程序

#### 计算机的解题过程

为了比较形象地了解计算机的解题过程，首先分析一个比图1.9更细化的计算机组成框图，如图1.11所示。

![](读书笔记：计算机组成原理(唐朔飞)/10.png)

##### 运算器

运算器包括三个寄存器（现代计算机内部往往设有通用寄存器组）和一个算逻电路ALU。其中ACC（Accumulator）为累加器，MQ（Multiplier-Quotient Register）为乘商寄存器，X为操作数寄存器。这三个寄存器在完成不同运算时，所存放的操作数类别也各不相同。表1.3列出了寄存器存放不同类别操作数的情况。

![11](读书笔记：计算机组成原理(唐朔飞)/11.png)

##### 主存储器

主存储器（简称主存或内存）包括存储体、各种逻辑部件及控制电路等。
存储体由许多存储单元组成，每个存储单元又包含若干个存储元件（或称存储基元、存储元），每个存储元件能寄存一位二进制代码“0”或“1”。可见，一个存储单元可存储一串二进制代码，称这串二进制代码为一个存储字，这串二进制代码的个数叫作存储字长。存储字长可以是8位、16位或32位等。一个存储字可代表一个二进制的数据，也可代表一串字符，如存储字为0011011001111101，既可表示为由十六进制字符组成的367DH（有关十六进制数制详见附录6A.1），又可代表十六位的二进制数，此值对应十进制数为13949，还可代表两个ASCII码：“3”和“}”（参见附录5A.1ASCII编码表）。
一个存储字还可代表一条指令（参阅表1.2）。

如果我们把一个存储体比作一幢大楼，那么每个存储单元可看作大楼中的每个房间，每个存储元可看作每个房间中的一张床位。显然，每个房间都需有一个房间编号，因此，我们也赋予每个存储单元一个编号，叫做存储单元的地址号。主存的工作方式就是按存储单元的地址号来实现对存储字各位的存（写入）、取（读出）。这种存取方式叫做按地址存取，也即按地址访问存储器（简称访存）。存储器这种工作性质对计算机的组成和操作是十分有利的。例如，人们只要事先将编好的程序按顺序存入主存各单元，当运行程序时，先给出该程序在主存的首地址，然后采用程序计数器加1的办法，自动形成下一条指令所在存储单元的地址，机器便可自动完成整个程序的操作。又如，由于数据和指令都存放在存储体内各自所占有的不同单元中，因此，当需要反复使用某个数据或某条指令时，只要指出其相应的单元地址号即可，而不必占用更多的存储单元重复存放同一个数据或同一条指令，大大提高了存储空间的利用率。此外，由于指令和数据都由存储单元地址号来反映，因此，取一条指令和取一个数据的操作，完全可视为是相同的，这样就可使用一套控制线路来完成两种截然不同的操作内容。

为了能实现按地址访问的方式，主存中还必须配置两个寄存器MAR和MDR。MAR（Memory Adress Register）是存储器地址寄存器，用来存放欲访问的存储单元的地址，其位数对应存储单元的个数（如MAR为10位，则有2^10=1024个存储单元，记为1K）。MDR（Memory Data Register）是存储器数据寄存器，用来存放从存储体某单元取出的代码或者准备往某存储单元存入的代码，其位数与存储字长相等。当然，要想完整地完成一个取或存操作，CPU还得给主存加以各种控制信号，如读命令、写命令和地址译码驱动信号等。随着硬件技术的发展，主存都制成大规模集成电路的芯片，而将MAR和MDR制作在CPU芯片中（参阅图4.4）。

早期计算机的存储字长一般和机器的指令字长与数据字长相等，故访问一次主存便可取一条指令或一个数据。随着计算机应用范围的不断扩大，解题精度的不断提高，往往要求指令字长是可变的，数据字长也要求可变。为了适应指令和数据字长的可变性，其长度不是由存储字长来确定，而由字节的个数来表示。1个字节（Byte）被定义为由8位（bit）二进制代码组成。例如4字节数据就是32位二进制代码；2字节构成的指令字长是16位二进制代码。当然，此时存储字长、指令字长、数据字长三者可各不相同，但它们必须是字节的整数倍。

##### 控制器

控制器是计算机组成的神经中枢，由它指挥全机各部件自动、协调地工作。具体而言，它首先要命令存储器读出一条指令，这叫做取指过程（也称取指阶段）。接着，它要对这条指令进行分析，指出该指令要完成什么样的操作，并按寻址特征指明操作数的地址，这叫做分析过程（也称分析阶段）。最后根据操作数所在的地址，取出操作数并完成某种操作，这叫作执行过程（也称执行阶段）。以上就是通常所说的完成一条指令操作的取指、分析和执行三阶段。

控制器由**程序计数器PC**（Program Counter），**指令寄存器IR**（Instruction Register）以及**控制单元CU**几部分组成。PC用来存放当前欲执行指令的地址，它与主存的MAR之间有一条直接通路，且具有自动加1的功能，即可自动形成下一条指令的地址。I用来存放当前的指令，IR的内容来自主存的MDR。
IR中的操作码（OP（R））送至CU（记作OP（IR）-CU），用来分析指令；其地址码（Ad（R））作为操作数的地址送至存储器的MAR（记作Ad（IR）→MAR）。
CU用来分析当前指令所需完成的操作，并发出各种微操作命令序列，用以控制所有被控对象。	

##### IO

I/O子系统包括各种外部设备及相应的接口。每一种设备都是由IVO接口与主机联系的，它接受CU发出的各种控制命令完成相应的操作。如键盘（输入设备）由键盘接口电路与主机联系；打印机（输出设备）由打印机接口电路与主机联系。

## 计算机硬件的主要技术指标

### 机器字长

机器字长是指CPU一次能处理数据的位数，通常与CPU的寄存器位数有关。字长越长，数的表示范围也越大，精度也越高。机器的字长也会影响机器的运算速度。倘若CPU字长较短，又要运算位数较多的数据，那么需要经过两次或多次的运算才能完成，这样势必影响整机的运行速度。

机器字长对硬件的造价也有较大的影响。它将直接影响加法器（或ALU）、数据总线以及存储字长的位数。所以机器字长的确定不能单从精度和数的表示范围来考虑。

### 存储容量

存储器的容量应该包括主存容量和辅存容量。

主存容量是指主存中存放二进制代码的总数。即存储容量=存储单元个数×存储字长

图1.11中的MAR的位数反映了存储单元的个数，MDR的位数反映了存储字的长度。例如，MAR为16位，表示2^16=65536，即此存储体内有65536个存储单元（可称作64K内存，1K=1024）。如DR为32位，表示存储容量为2^16×32=2^21=2M位（1M=2^20）。

现代计算机中常以字节的个数来描述容量的大小，卤一个字节已被定义为8位二进制代码，故用字节数便能反映主存容量。例如上述存储容量为2M位，也可用2^18字节表示，记作2^18B或256KB（B用来表示一个字节）。
同理，辅存容量也可用字节数来表示，例如，某机辅存（如硬盘）容量为4GB（1G=1KM=2^30）。

[关于内存地址和内存空间的理解](<https://www.cnblogs.com/VIPler/p/4282584.html>)

> **内存地址是内存当中存储数据的一个标识，并不是数据本身，通过内存地址可以找到内存当中存储的数据。**

### 运算速度

计算机的运算速度与许多因素有关，如机器的主频、执行什么样的操作、主存本身的速度（主存速度快，取指、取数就快）等等都有关。早期用完成一次加法或乘法所需的时间来衡量运算速度，即普通法，显然是很不合理的。后来采用吉普森（Gibson）法，它综合考虑每条指令的执行时间以及它们在全部操作中所占的百分比。

## 本书结构

![](读书笔记：计算机组成原理(唐朔飞)/12.png)

# 第二章：计算机的发展及应用

## 计算机的发展史

谁也不曾想到，仅仅被当作军事计算工具应用的电子计算机，在半个世纪中竟然会成为改变社会结构、乃至促使人们的工作和生活方式发生惊人变化的不可抛弃的宠儿，真可谓21世纪下半世纪科技发展的最有影响的商品。并且它还将继续预示着未来世界的变化，使数千年人类文明史中曾有过的各种神话般的幻想逐渐变为现实。让我们一代一代地为把梦想变为现实而全身心地投入吧！让我们敞开双手去拥抱未来美好世界的到来吧！

### 计算机的产生和发展

#### 第一代电子计算机

1943年，正当第二次世界大战进入后期的阶段，因战争的需要，美国国防部批准了由Pennsyivania 大学John Mauchly教授和John Presper Eckert工程师提出的建造一台用电子管组成的ENIAC（Electronic Numerical Integrator And Computer）电子数字积分机和计算机的计划，用它来解决当时国防弹道研究实验室（BRL）为开发新武器的射程和检测模拟运算表的任务。当时，由于运算能力不足，该实验室无法在规定的时间内拿出准确的运算表，严重影响了新武器的制作。

ENLAC于1946年交付使用，其首要任务就是完成了一系列测定氢弹可靠性的复杂运算。ENIAC采用十进制运算，电路结构十分复杂，使用18000多个电子管，运行时耗电量达150千瓦，体积庞大，重量达30吨，占地面积为1500平方英尺，而且需用手工搬动开关和拔、插电缆来编制程序，使用极不方便，但它却比任何机械计算机快得多，每秒可进行5000多次加法运算。

ENIAC的出现其意义不仅仅是实现了制造一台通用计算机的目标，而且标志了计算工具进入了一个崭新的时代，是人类文明发展史中的一个里程碑。仅仅半个世纪，计算机已经使人类社会从制造业社会发展到了信息化社会。
虽然ENIAC于1955年正式退役，并陈列于美国国立博物馆供人们参观，但它的丰功伟绩将永远记载在人类的文明史中。

1945年，ENIAC的顾问、数学家von Neumann（冯诺依曼）在为一个新的EDVAC（电子离散变量计算机）所制定的计划中首次提出了存储程序的概念，即将程序和数据一起存放在存储器中，使编程更加方便。这个思想几乎同时被Turing想到了。

1946年，von Neumann与他的同行们在Princeton Institute进行高级研究时，设计了一台存储程序的计算机IAS，可惜因种种原因直到1952年IAS也未能问世。但IAS的总体结构从此得到了确认，并成为后来通用计算机的原型，图2.1就是IAS计算机的总体结构示意。它由几部分组成：一个同时存放指令和数据的主存储器；一个二进制的算逻部件；一个解释存储器中的指令并能控制指令执行的程序控制部件；以及由控制部件操作的I/O设备。

![](读书笔记：计算机组成原理(唐朔飞)/13.png)

20世纪50年代，美国出现了Sperry和IBM两大制造计算机的公司，后来又从Sperry公司分离出了UNIVAC子公司，他们控制着计算机市场。

1947年，Eckert和Mauchly共同建立了生产商用计算机的计算机公司，他们第一个成功的产品是UNIVACI（Universal Automatic Computer），后来Eekert-Mauchly 公司成为从Sperry-Rand公司分离出来的UNIVAC子公司，并继续制造了一系列产品，如UNIVACIⅡ及UNIVAC1100系列产品，成为科学和商用计算机的主流产品。同时IBM公司在1953年推出了首台存储程序的计算机701，1955年又推出了702机，使之更适用于科学计算和商业应用，后来形成了700/7000系列，奠定了IBM成为计算机制造商的绝对权威。

自从ENIAC问世后，人类为提高电子计算机性能的欲望从未减退过，并在20世纪50年代初，除美国外，英、法、俄（前苏联）以及日本、意大利等国都相继研制出本国的第一台电子计算机，我国也于1958年研制成自己的第一台电子计算机。可是在这十多年的时间里，计算机的性能并未出现奇迹般的提高，它的运算速度每秒仅在数千次至上万次左右，其体积虽然不像ENIAC那样庞大，但却也占了相当大的空间，耗电量也很大。直到20世纪50年代末，计算机遇上了第一次大飞跃的发展机遇，其性能出现了数十倍以至几百倍的提高，这就是用晶体管替代电子管的重大变革。

#### 第二代晶体管计算机

1947年在Bell实验室成功地用半导体硅作基片，制成了第一个晶体管，它的小体积、低耗电以及载流子高速运行的特点，使真空管望尘莫及。进入50年代后，全球出现了一场以晶体管替代电子管的革命，计算机的性能有了很大的提高。以IBM700/7000系列为例，晶体管机7094（1964年）与电子管机701（1952年）相比，其主存容量从2K增加到32K字；存储周期从30us下降到1.4us；指令操作码数从24增加到185；运算速度从每秒上万次提高到每秒50万次。而且7094机还采用了数据通道和多路转换器等在当时看来是最新的技术。

尽管用晶体管代替电子管已经使电子计算机的面貌焕然一新，但是随着对计算机性能越来越高的追求，新的计算机所包含的晶体管个数已从-万个左右骤增到数十万个，人们需要把晶体管、电阻、电容等一个个元件都焊接到一块电路板上，再由一块块电路板通过导线连接成一台计算机。其复杂的工艺不仅严重影响制造计算机的生产效率，更严重的是很难避免由几十万个元件导致几百几千万个焊点所造成计算机工作的不可靠性。

随着1958年微电子学的深入研究，特别是新的光刻技术和设备的成熟，为计算机的发展又开辟了一个崭新时代集成电路时代。

#### 第三代集成电路计算机

仔细分析就会发现，计算机的数据存储、数据处理、数据传送以及各类控制功能，基本上都是由具有布尔逻辑功能的各类门电路完成的。而大量的门电路又都是由晶体管、电阻、电容等搭接而成，因此，当集成电路制作技术出现后，可以利用光刻技术把晶体管、电阻、电容等构成的单个电路制作在一块极小（如几个平方微米）的硅片上。进一步发展，实现了将成白上千个这样的门电路全部制作在一块极小（如几个平方毫米）的硅片上，并引出与外部连接的引线，这样，一次便能制作成成百上千个相同的门电路，又次大大地缩小了计算机的体积，大幅度下降了耗电量，极大地提高了机器的可靠性。这就是人们称作为小规模集成电路（SSI）和中等规模集成电路（MSI）的第三代计算机。其典型的代表为IBM的System/360和DEC的PDP-8。

1964年，IBM推出了一个新的计算机家族System/360，它打破了7000系列在体系结构方面的一些约束。为了推动集成电路技术，改进原来的结构，IBM在经济和技术上作出了极大的付出，但最终使它占领了大约70%的市场，成为计算机领域内的绝对卖主。

System/360家族中有不同的机型，但它们又都是互相兼容的，即在某台机型上运行的程序可以在这一家族中的另一台机型上运行。它们具有类似或相同的指令系统（家族中低档机的指令系统可以是高档机指令系统的一个子集），各机型有类似或相同的的操作系统，而且随着机器档次的提高，机器的速度、存储器的容量、/O端口的数量以及价格都有所增长。

另一代表机器是DEC的PDP-8，它采用总线结构，有迷你机之称。它以低价格、小体积吸引了不少用户，售价仅16000美元，而当时System/360大型机的售价为数十万美元。PDP-8使DEC暴发起来，使其成为继IBM之后的第二大计算机制造商。

从1946年的ENIAC到1964年的IBMSystem/360，历时不到20年，计算机的发展经历了电子管一晶体管一集成电路三个阶段，通常把它称作计算机的三代。显然，早期计算机的更新换代主要集中体现在组成计算机基本电路的元器件（电子管、晶体管、集成电路）上。

第三代计算机之后，人们没有达成定义新一代计算机的一致意见，表2.1列出了硬件技术对计算机更新换代的影响。

![](读书笔记：计算机组成原理(唐朔飞)/14.png)

进入到20世纪70年代后，把计算机当作高级计算工具的狭隘观念已被人们逐渐摒弃，计算机已成为一门独立的学科而迅猛发展着，并且正在影响改变着人类的生活方式，这是由于微处理器的出现（采用大规模和超大规模集成电路）、软件技术的完善及应用范围的不断拓宽所带来的必然结果。

### 微型计算机的出现和发展

集成电路技术把计算机的控制单元和算逻单元集成到一个芯片上，制成了微处理器芯片。1971年，美国Intel公司31岁的工程师霍夫研制成世界上第一个4位的微处理器芯片4004，集成了2300个晶体管。随后，微处理器经历了4位、8位、16位、32位和64位几个阶段的发展，芯片的集成度和速度都有很大的提高。与此同时，半导体存储器的研制也正在进行，1970年，Fairchild制作了第一个存储芯片，该芯片大约只有一个磁心这么大，却能保存256位二进制信息，但是每位的价格高于磁心。1974年后，随着半导体存储器价格的迅速下降，位密度的不断提高，存储芯片的容量经历了1K、4K、16K、
64K、256K、1M、4M、16M和64M这几个阶段，每个新的阶段都比过去提高4倍的容量，而价格和访问时间都有所下降。

总之，芯片集成度不断提高，从在一个芯片上集成成百上千个晶体管的中、小规模集成电路，逐渐发展到了能集成成千上万个晶体管的大规模集成电路（LSI）和能容纳百万个以上晶体管的超大规模集成电路（VLSI）。微芯片集成晶体管的数目验证了Intel公司的缔造者之一Gordon Moore提出的“微芯片上集成的晶体管数目每三年翻两番”的规律，这就是人们常称的Moore（摩尔）定律。

由于微处理器芯片和存储器芯片的出现，微型计算机也随之问世。如1971年用4004微处理器制成了MCS-4微型计算机。70年代中期，8位微处理器8008、8080、R6502、M6800、Z80等相继出现，并用R6502制成了Apple IⅡ
微型计算机，用Z80制成了CROMEMCO80微型计算机等。

最值得一提的是世界上第一大微处理器的制造商Intel，其典型产品有：

* 8080：世界上第一个8位通用的微处理器，1974年问世。

* 8088：集成度达2.9万管，主频4.77MHz，字长16位（外部8位），又称准16位，地址20位，采用4个字节指令队列，被IBM首台微机（IBMPC）选用，1979年问世。

* 8086：16位，2.9万管，地址20位，采用6个字节指令队列，指令系统与8088完全兼容，1978年问世。

* 80286：16位，13.4万管，6MHz，地址24位，可用实际内存16KB和虚拟内存1GB，1982年问世。

* 80386：32位，27.5万管，12.5MHz、33MHz、50MHz，地址32位，
  4GB实际内存，64TB（T=20）虚拟内存。其性能可与几年前推出的小型机和大型机相比，1985年问世。

* 80486：32位，120万管，25MHz、33MHz、50MHz，4GB实际内存，64TB虚拟内存，引用更加复杂的Cache技术和指令流水技术，速度比80386快一倍，性能指标高于803863~4倍，1989年问世。

* Pentium（80586）：64位，310万管，66MHz、100MHz，采用超标量技术，使多条指令可并行执行，速度比80486高出6~8倍，1993年问世。

* Pentium pro（P6）：64位，550万管，133MHz、150MHz、200MHz，采用动态执行RISC/CISC技术、分支预测、指令流分析、推理性执行和二级Cache等技术，1995年问世。

* Pentium Ⅱ：64位，550万管以上，233MHz、300MHz、400MHZ、450MHz，64GB实际内存，64TB虚拟内存，融入了专门用于有效处理视频、音频和图形数据的IntelMMX技术，1997年问世。

* PentiumⅢ：64位，950万个晶体管，450~600MHz，64GB实际内存，64TB虚拟内存，融人了新的浮点指令，以支持三维图形软件，1999年问世。

* Pentium 4：64位，4200万个晶体管，1.3~1.8GHz，64GB实际内存，64TB虚拟内存，包括另外的浮点和其他多媒体应用的增强，2000年问世。

显然，从20世纪70年代初至今，微型计算机的发展在很大程度上取决于微处理器的发展，而微处理器的发展又依赖于芯片集成度和处理器主频的提高。从2000年Intel Pentium4问世至今这几年的发展历程看，处理器的架构变化不大，主要从提高处理器的主频、增加扩展指令集、增加流水线、提高生产工艺水平（晶体管的线宽从180nm→130nm→90nm→65nm）等几方面来不断改进处理器的性能。但制造工艺的缺陷，导致了处理器功耗持续上升。大量研究表明，每推出一代新型处理器，它的功耗是上一代处理器功耗的2倍，倘若芯片集成度达10亿个，处理器的自身功耗将会使人们一筹莫展。可见，有效解决微处理器的功耗和散热问题已成为当务之急。事实上一味追求微芯片集成度的提高，除了引发功耗、散热问题外，还会出现更多的问题，如线延迟问题、软误码率现象等。

为了提高计算机的性能，除了提高微处理器的性能外，人们还努力通过开发指令级并行性来实现。可是在指令级并行性应用中，又受到数据预测精度有限、指令窗口不能过大以及顺序程序固有特性的限制等，使得依靠开发指令级并行性来提高计算机的性能又有很大的局限性。

虽然很多因素阻碍了微型计算机性能的不断提高，可是随着计算机的广泛应用，尤其是网络技术的迅猛发展，人们依然在追求着机器性能的完美。例如，当前网络的环境基本上是让计算机处于桌面固定的状态，而人们更希望机器能围绕人们的需求转，越来越方便地使用计算机，不希望机器局限于固定的桌面式应用，让机器以手持式或穿戴式以及其他形式，使之更具人性化，能和谐地融合于人们的生活和工作之中。与此相适应的移动计算技术便应运而生。

移动计算模式迫切要求微处理器具有响应实时性、处理流式数据类型的能力、支持数据级和线程级并行性、更高的存储和IVO带宽、低功耗、低设计复杂性和设计的可伸缩性。

当前主流商用处理器大部分都是超标量结构，是一种在一个时钟周期内同时发射多条标量指令到多个功能部件以提高处理器性能的体系结构，若每周期发送4条指令，已不能满足日渐庞大的应用程序对高性能的需求。而继续开发更大发射带宽的超标量结构将会导致处理器的逻辑设计复杂度大幅增加，正确性验证变得越来越困难。人们开始寻找新的体系结构来适应新的市场和不断变化的应用需要。

从20世纪微处理器的发展来看，几乎每3年处理器的性能就能提高4~5倍，但是计算机中一些其他部件性能的提高速度达不到这个水平。因此，必须不断调整计算机的组成和结构，以弥补不同部件性能的不匹配问题。影响它们之间不匹配的主要因素是处理器与主存之间的接口和处理器与外设之间的接口。

处理器与主存之间的接口是整个计算机最重要的通路，因为它要负责在主存与处理器之间传送指令和数据，如果主存或主存与处理器之间的传送跟不上处理器的要求，就会使处理器处于等待的状态。为此，可加宽数据总线的宽度，在主存和处理器之间设置高速缓冲存储器（Cache）
并发展成片内Cache和分级Cache，采用高速总线和分层总线来缓冲和分流数据，从而提高处理器和存储器之间的连接带宽。

处理器和外设之间也存在大量的数据传输要求，可通过各种缓冲机制、加上高速互连总线以及更精致的总线结构来解决它们之间传输速率的不匹配问题。

因此，计算机的设计者们必须不断平衡处理器、主存、IV0设备和互连结构之间的数据吞吐率和数据处理的需要，使计算机的性能越来越好。

从21世纪初来看，当前通用微处理器的发展重点将在以下几方面。

①进一步提高复杂度来提高处理器性能。这种方法沿袭传统的指令级并行方法加速单线
程应用，组织更宽的超标量，采用更多的功能部件、多级Cache和激进的数据、控制以及指令轨迹预测，达到使用尽可能多的指令级并行（Instruction-Level Parallelism，ILP）。例如，先进超标量处理器（Advanced Superscalar Processor）、超前瞻处理器（Superspeculative Processor）、多标量处理器（Multiscalar Processor）、数据标量处理器（Datascalar Processor）和踪迹处理器（Trace Processor）
等。

②通过线程/进程级并行性的开发提高处理器的性能，即通过开发线程级并行性（Thread-
Level Parallelism，TLP）或进程级并行性（Process-Level Parallelism，PLP）来提高性能，简化硬件设计。例如，多处理器（Multiprocessor）、单芯片处理器CMP（On-chip Multiprocessor）、多线程处理器（Multi-Threaded Procesor）以及同时多线程处理器（Simultaneous Multi-Threading Processor）、动态多线程处理器（Dynamic-Multithreaded Processor）和多路径多线程处理器（Threaded Multipath Pro-cessor）等。

③将存储器集成到处理器芯片内来提高处理器性能。采用ILP、TLP、PLP能大大提高处理器内部指令执行的并行度，而指令和数据的供应是充分发挥这些技术的关键问题。传统上以处理器为中心的设计思想导致处理器把大量的复杂性花在解决访存延迟的问题上。然而处理器和存储器性能的差距仍在以每年50%的速度增大，使得访存速度将成为未来提高处理器性能的主要瓶颈。基于此，PIM（Processor In Memory）技术提出将处理器和存储器集成在同一个芯片上，这样可使访存延时减少5~ 10倍以上，存储器带宽可增加50~100倍以上。大多数情况下，整个应用在运行期间都可放到片上存储器里。将存储器集成到处理器芯片上后，原来用于增加处理器一存储器带宽的大量存储总线引脚可以被节省下来用于增加VO带宽，这将有利于提高未来大量的网络应用性能，并且能减少对片外存储器的访问，使处理器的功耗大大降低。

④发展嵌入式处理器。由于嵌入式应用需求的广泛性，以及大部分应用功能单一、性质确定的特点，决定了嵌入式处理器实现高性能的途径与通用处理器有所不同。目前嵌入式处理器大多是针对专门的应用领域进行专门设计来满足高性能、低成本和低功耗的要求。例如，视频游戏控制需要很高的图形处理能力；手持、掌上、移动和网络PC要求具备虚存管理和标准的外围设备；手机和个人移动通信设备要求在具有高性能和数字信号处理能力的同时具有超低功耗；调制解调器、传真机和打印机要求低成本的处理器；机顶盒和DVD则要求高度的集成性；数字相机要求既有通用性又有图像处理能力。

目前嵌入式处理器的高性能和低成本技术发展趋势是：体系结构需要在新技术与产品、市场和应用需求之间取得平衡；设计方法趋向于走专用、定制和自动化的道路。

### 软件技术的兴起和发展

计算机刚刚问世时，还未建立“软件”这一概念，随着计算机的发展及应用范围的扩大，逐渐形成了软件系统。

在早期的计算机中，使用者必须根据机器自身能识别的语言一—机器语言（机器指令）按解题要求编写出机器可直接运行的程序。由于机器不同，机器语言也不同，因此人们在不同的机器上编程，就需熟悉不同机器的机器指令，使用极不方便，写出的程序很难读懂。20世纪50年代后，逐渐形成了符号语言和汇编语言，这种语言虽然可以不用0/1代码编程，改善了程序的可读性，但它们仍是面向机器的，即不同的机器各自有不同的汇编语言。为了使这种符号语言转变成机器能识别的语言，人们又创造了汇编程序，用于把汇编语言翻译成机器语言。

为了摆脱对具体机器的依赖，在汇编语言之后又出现了面向问题的高级语言。使用高级语言编程可以不了解机器的结构，高级语言的指令通常是一个英语词汇，词义本身反映出命令的功能，它比较接近人们习惯用的自然语言和数学语言，使程序具有很强的可读性。高级语言的发展经历了几个阶段。
初级阶段的代表语言是1954年问世的FORTRAN，它主要面向科学计算和工程计算。第二阶段可视为结构化程序设计阶段，其代表是1968年问世的PASCAL语言，它定义了一个真正的标准语言，按严谨的结构化程序编程，具有丰富的数据类型，写出的程序易读懂，易查错。第三阶段是面向对象程序设计阶段，其代表语言是C++。近年来随着网络技术的不断发展，又出现了更适应网络环境的面向对象的JAVA语言，而且随着Intemet技术的发展和应用，JAVA语言越来越受到人们普遍欢迎。

为了使高级语言描述的算法在机器上执行，同样需有一个翻译系统，于是产生了编译程序和解释程序，它们能把高级语言翻译成机器语言。

可见，随着各种语言的出现，汇编程序、编译程序、解释程序的产生，逐渐形成了软件系统。

另一方面，随着计算机应用领域的不断扩大，外部设备的增多，为了使计算机资源让更多用户共享，又出现了操作系统。操作系统能协调管理计算机中各种软件、硬件及其他信息资源，并能调度用户的作业程序，使多个用户能有效地共用一套计算机系统。操作系统的出现使计算机的使用效率成倍地提高，并且为用户提供了方便的使用手段和令人满意的服务质量。如DOS、UNIX和Windows等等。

此外，一些服务性程序如装配程序、调试程序、诊断程序和排错程序等也逐渐形成。特别是随着计算机在信息处理、情报检索及各种管理系统中应用的发展，要求大量处理某些数据，建立和检索大量的表格。这些数据和表格按一定的规律组织起来，使用户使用更方便，于是出现了数据库。数据库和数据管理软件一起便组成了数据库管理系统。而且随着网络的发展，又产生了网络软件等等。

以上所述的各种软件均属**系统软件**，而软件发展的另一个主要内容就是**应用软件**。应用软件种类繁多，它是用户在各自的行业中开发和使用的各种程序。如管理财务的各种财务软件、办公用的文字处理和排版软件、帮助管理日常业务工作和图文报表的“电子表格”和“数据库”软件、帮助工程设计的CAD软件以及各种实用的网络通信软件等等。

软件发展有以下几个特点：

（1）开发周期长
研制一个软件往往因其规模庞大而需较长的开发周期。例如美国穿梭号宇宙飞船的软件包含4000万行目标代码，倘若一个人一年开发一万行程序，则需集中4000人花一年时间才能完成。而且要做到4000人的默契配合，涉及种种技术问题的协调，如分析方法、设计方法、形式说明方法、版本标准等等都得有严格的规范，其难度远远超过自动化程度极高的硬件制造。

（2）制作成本昂贵
超大规模集成电路技术给硬件制造业带来巨大利益，使硬件的价格不断下降，使一台普通的微型计算机的价格与一台彩色电视机的价格相当，而且还在下降。可是软件的开发完全依赖于人工，致使软件开发成本费不断上涨，在美国软件成本约占计算机系统总成本的90%，已成为司空见惯的现象。

（3）检测软件产品质量的特殊性
一种软件在刚开始推出时，主要实现其面向领域所需的核心功能，之后逐步集成大量的附加功能。也就是说，要完善一个软件产品，必须在应用过程中不断加以修改、补充。只有使用了一定时间后，才能对软件产品质量进行确定。

尽管软件技术兴起和发展比硬件晚，而且其发展速度比不上硬件快（如微处理器的性能以Moore定律所述的几何级数增长），但是仍可以说，如果没有当今的软件技术，计算机系统和应用的发展也不会有今天这样的成就。客观地说，软件的发展不断激励着微处理器和存储器性能的增长。

世界各国当前都十分重视软件人才的培养和软件产业的形成，但实际上它们都很难与当前计算机应用普及的广度和深度相适应。也正因为如此，有些软件开发商瞄准了特定的市场，一旦在性能、质量占到上风时，就会很快积聚财富，成为新的世界富商。例如美国微软公司十来年的发展就超过传统工业（如汽车制造业），同样微软的组建者也就很快成为现代世界最大富商之一。

在二三十年软件开发的实践中，人们对软件开发也逐渐有了较深刻的认识，逐渐体会到软件不是简单的编写程序，欲开发成一个优良的软件，和开发其他产品一样，必须明确开发要求，然后作可行性分析，确定基本方法，进行需求分析，再深入到用户核准需求，取得一致意见后才能进入软件设计阶段。因此，程序只是完成整个软件产品的一个组成部分，软件生存周期的各个阶段都要得出一个或几个组成部分，它们都是以文档资料形式存在。正如著名专家Boehm曾经指出：“软件是程序以及开发、使用和维护程序需要的所有文档。”可见软件开发不是某种个体劳动的神秘技巧，它是个组织良好、管理严密、各类人员协同配合、共同完成软件工程的全过程。只有这样才能保证软件工程的顺利完成，并能节省大量开发费用。否则将会陷入事倍功半、长期无法正常运行的困境。

## 计算机的应用

自ENIAC问世后将近30余年的时间里，计算机一直被作为大学和研究机构的娇贵设备。20世纪70年代中期后，大规模集成工艺日趋成熟，微芯片上集成的晶体管数一直按每三年翻两番的Moore定律增长，微处理器的性能也按此几何级数提高，而价格也以同样的几何级数下降。现在你用1000美元就可以买到与10年前IBM大型机相当的个人计算机，这台机器包括微处理器、存储器以及其他芯片在内大约有1亿个晶体管。以至于以前需花数百万美元的机器（如80MFLOPS的CRAY）变得价值仅为数千美元左右（而此类机器的性能可达200MFLOPS），至于对性能不高的微处理器芯片而言，仅花数美元就可购到。因此，人们终于使计算机走出了实验室而渗透到各个领域乃至走进普通百姓的家中。当然，除了计算机价格猛跌外，计算机软件技术日趋完臻也是计算机获得广泛应用的重要原因。尤其是近年来计算机技术和通信技术相互融合，出现了构通全球的Internet网，更使计算机的应用范围从科学计算、数据处理等传统领域扩展到办公自动化、多媒体、电子商务、虚拟工厂、远程教育等，遍及政治、经济、军事、科技、以及个人文化生活和家庭生活的各个角落，不久的将来，计算机将成为尤如人们离不开水和电一样的宠物。

### 科学计算和数据处理

#### 科学计算

科学计算一直是计算机的重要应用领域之一。其特点是计算量大和数值变化范围大。在天文学、量子化学、空气动力学和核物理学等领域都要依靠计算机进行复杂的运算。例如人们日常生活难以摆脱的天气预报，当你只要知道第二天的气候变化时，采用lMIPS的计算机顷刻时间便可获得。倘若想预报一个月，乃至一年的气候变化，使各地提前做好防汛、防旱、防瀑等工作，则100MIPS或更高的计算机才能满足。现代的航空、航天技术，如超音速飞行器的设计、人造卫星和运载火箭轨道的计算，也都离不开高速运算的计算机。

此外，计算机在其他学科和工程设计方面，诸如数学、力学、晶体结构分析、石油勘探、桥梁设计、建筑、土木工程设计等领域内，都得到了广泛的应用。

#### 数据处理

数据处理也是计算机的重要应用领域之一。早在20世纪五六十年代起，人们就把大批复杂的事务数据交给了计算机处理，例如政府机关公文、报表和档案；大银行、人公司、大企业的财务、人事、物料，包括市场预测、情报检索、经营决策、生产管理等大量的数据信息，都由计算机收集、存储、整理、检索、统计、修改、增删等，并由此获得某种决策数据或趋势，供各级决策指挥者参考。

### 工业控制和实时控制

通过各种传感器获得的各种物理信号经转换为可测可控的数据信号后，再经计算机运算，根据偏差，驱动执行机构来调整，便可达到控制的目的。这种应用已被广泛用于冶金、机械、纺织、化工、电力、造纸等行业中。

目前的工业控制远比20世纪六七十年代先进得多。新型的工业自动控制系统以标准的工业计算机软、硬件平台构成集成系统，取代了传统的封闭式系统，具有更强的适应性，更好的开放性，更易于扩展，更经济、更短的开发周期等显著优点。通常将工控系统分为三层：控制层、监控层和管理层。控制层是最下层，它是通过各种传感器来获得各种有效信号的。监控层下连控制层，上连管理层，它不但实现对现场的实时监测与控制，而且常在自动控制系统中完成上传下达，组态开发的重要作用。特别是组态软件的出现，它使数据采集、过程控制变得十分简单，它为用户提供良好的开发界面和简捷的使用方法，用各种软件模块可以非常容易地实现和完成监控层的各种功能。就目前发展趋势而言，工业控制的应用已经向控管一体化方向发展，利用网络技术，通过传感技术和多媒体技术，操作者可以在控制室内通过大屏幕显示，使你领受到各车间、各工位、各部门的生产运行情况，并可直接由控制室发出各种控制命令，指挥全厂正常工作。

在军事上，导弹的发射及飞行轨道的计算控制、先进的防空系统等现代化军事设施，通常也都是由计算机构成的控制系统，其中包括雷达、地面设施、海上装备等。例如将计算机嵌入到导弹的弹头内，利用卫星定位系统，将飞行目标和飞行轨迹事先存储在弹载计算机内，导弹在飞行中对实际飞行轨迹进行不断修正，直接袭击目标，其命中率几乎接近100%。美国在海湾战争以及后来的军事冲突中，计算机实时控制技术发挥了极为突出的作用。
### 网络技术的应用

促使计算机网络诞生的最早动机在于实现硬件资源的共享。当时计算机十分昂贵，人们希望能远距离利用计算机，因此在1954年第一次实现了将穿孔卡上的数据从电话线发送到远方的计算机来完成运算，这可以说是计算机网络的雏形，可见网络技术的基础是计算机技术与通信技术的结合。

1992年美国政府提出了“国家信息基础设施计划”，1993年西方七国提出“全球信息基础设施计划”，整个世界随着通信技术和计算机技术的结合，在新的世纪到来前，一个崭新的全球性的Internet网正在形成，并正以更新的姿态讫立在世界的顶端。由于全球网络化消除了人们之间因时间、距离和地理界限所形成的障碍，从而使各国人们在技术交流、商品交换、文化传递、感情沟通等方面变得十分迅捷，十分方便。如果再有性能良好的语言翻译机（实际上目前已经有翻译机了），那么原有的隔阂和障碍可能会全部消失。正因如此，Internet的发展规模和速度达到了惊人的程度，人们称之为“新Moore定律”，全球入网量每六个月翻一番。至1998年止，全世界上网的计算机已达5000万台，上网人数已达1.5亿。实际上从Intemet开始至今，仅为4年。
相比之下，全世界5000万用户拥有电视机花了13年，拥有收音机经历了38年，拥有电话的时间就更长了。可以断言，全球网络化不仅改变着商业经济、工业生产、科技发展，还必将影响着人们的工作、娱乐和生活，它正在改变着整个世界。

网络应用涉及方方面面，在此仅举几个例子。

#### 电子商务

电子商务的含义是任何一个组织机构可利用Intermet网络来改变他们与客户、供应商、业务伙伴和内部员工的交流，也可以认为是消费者、销售者和结算部门之间利用Internet完成商品采购和支付收款的过程。例如某企业可以通过在Intemet上的网页向全球发布推出的商品，并向他的各地代理商发出各种指令；当某客户欲购此商品时，他可以通过网上直接与生产企业联络，也可与各地代理商联系，进一步了解该商品的性能，并将其姓名、地址、个人电子帐号及送货要求等告诉卖主。企业或推销者通过Intermet与银行联络，查询核实该客户的资金状况，并通过协定的支付方式由银行实行电子交付，而商品则由企业推销者直接送到客户手中。这种简洁、快捷、可靠的商品销售方式，可从根本上改变传统的销售方式。它可以不要传统意义上的铺面，而直接用电子铺面来取代；它可以一夜之间将自已的品牌通告全世界；它可以实现公平竞争，小企业不必惊怕大企业的广告效应，大企业也不必顾虑小企业的快速应变能力，各自都可以通过网上信息进行竞争；它可以取消纸币交易的各种弊端，完全实现电子钱币交换；它可以减少很多中间环节，以最高效率、最省人力、最广泛的市场实现商品的全球交换。目前世界各国都在蓬勃发展电子商务，我国的电子商务也在一些城市陆续展开。

#### 网络教育

传统的老师讲、学生听的课堂授教模式随着全球网络化的发展，将会在
“知识爆炸”^①^时代逐渐被淘汰或更新。旧的教学模式最大缺点是，作为受知主体的学生在教学过程中自始至终处于受灌输的被动地位，其主动性、积极性难以发挥，学生无法主动探索，主动发现社会上、国际上的信息资源，很难培养具有“信息能力”的劳动者。因此，不利于创新能力的形成和创新型人才的成长。此外，这种模式受场地、空间的限制，投资大，受教育面有限，不能适应各种学科的终身教育和全面教育。

基于Intermet 教育网络的建立，学生受教可以不受时间、空间和地域的限制，通过网络伸展到全球的每个角落，建立真正意义上的开放式的虚拟学校，每个学生可以在任意时间、任意地点通过网络自由地学习。不论学生的贫富贵贱都可以找到第一流老师的指导，都可以向世界最权威的专家请教，都可以从世界任何角落获取最新的信息和资料。到那时可以说，任何人都享有高等教育和终身教育的可能。这种基于网上的教育模式，不仅美、英、日等发达国家在积极实施，我国在有条件的地区和省市也正在加速启动建设Internet教育网络，实现由传统教育体制、教学模式向全新教育体制、教学模式的转变，实现教育的重大革新，满足21世纪人才培养的需求。

> ①英国技术预测专家詹姆斯·马丁测算结果表明：人类知识到19世纪50年代增加了一倍：20世纪初是每10年增加1倍；20世纪70年代则是每5年增加1倍：近10年大约每3年增加1倍，故称作“知识爆炸”。

#### 敏捷制造

随着全球信息网络技术的发展，对工业制造业的制造模式和企业的组成和管理模式也产生了极大影响，新的被称为21世纪的制造模式——敏捷制造由此而生。敏捷制造由两部分组成：敏捷制造的基础结构和敏捷制造的虚拟企业。前者为形成虚拟企业提供环境和条件，后者对市场不可预期的变化作出迅速响应。

当出现某种市场机遇时，由敏捷制造基础结构所形成的虚拟企业，通过网上联络若干个具有核心资格的组织者，他们以各自的资金、技术、厂房、设备等优势，通过国家的法律和彼此的合同，组建成一个虚拟企业。该企业不必有集中的办公场地和固定的组织机构，完全通过网络实现产品的技术设计和制造，以及网上销售和网上服务，充分发挥各自的优势，以最优化的结合，在最低的成本核算下获取最大的利润。这种虚拟企业是在敏捷制造基础结构环境下形成的独立的、实体性的、社会性的团体，同时又是一个动态的联盟，他们可以根据市场的变化和要求，可以解散原来的虚拟企业，而与新的伙伴组成新的虚拟企业。可见网络技术的发展对社会原来的固定企业结构形式构成了严峻的挑战。

以上仅就几个方面列举了全球网络化对整个社会经济、文化、教育、工业制造等方面的影响。实际上由于网络技术的发展，现在已经形成了虚拟图书馆、虚拟医院、虚拟商场、虚拟娱乐场所等等。事实上Intermet早已从对经济的干预，发展到对政治的干预。例如美国总统克林顿，从他的绯闻到国会弹劾，直至幸免弹劾，都与网民的直接参与分不开。又如非洲尼日利亚总统大选，两名主要的侯选人都为选举分别建立了各自的网站。再如在英国戴安娜王妃和英国王室的众多网站上，充满政治性的窃窃私语已司空见惯。可以说全球的网络化必将进一步改变着整个世界。

### 虚拟现实

虚拟现实是利用计算机生成的一种模拟环境，通过多种传感设备使用户
“投入”到该环境中，实现用户与环境直接进行交互的目的。这种模拟环境是用计算机构成的具有表面色彩的立体图形，它可以是某一特定现实世界的真实写照，也可以是纯粹构想出来的世界。这类技术虽然早在20世纪60年代初就开始研究，但只有在计算机技术迅速发展的90年代，各种传感设备以及计算机价格的不断降低，软件系统的日趋完善，如实时三维图形生成及显示、三维声音定位与合成、环境建模等等技术的发展，才有可能使虚拟现实技术获得迅速发展和广泛应用。虚拟现实在军事、教育、航天、航空以及娱乐、教育、生活中的应用，不仅会改变人们的思维方式和生活方式，而且必将导致一场重大的技术革命。

这里列举两个例子可看出虚拟现实的巨大魅力。

虚拟演播室近年来已成为影视制作的热点，它综合运用现代计算机图形和图像处理、计算机视觉和现代影视技术，将摄像机拍摄的图像实时地与计算机三维虚拟背景或另一地点实拍的背景，按统一的三维透视成像关系进行合成，从而形成一种新的影视节目，它的效果是传统影视制作无可比拟的。在虚拟演播室里，演员可以在没有任何道具的舞台上演戏，然后根据剧情需要用计算机制作的画面进行合成。不仅如此，演员也可以是虚拟的，可以根据事先拍好的演员镜头，利用演技数据，用计算机图形学技术制作演员的特定动作，这对于一些特技的制作，显得格外重要。这种在虚拟演播室制作的影视剧，大大降低了制作成本，缩短了制作时间，并且可以制作更有魅力的艺术作品。

飞行员的仿真虚拟现实系统与汽车驾驶员的虚拟现实系统也都广泛应用了虚拟现实技术。在飞行仿真系统中，要形成真实的飞行环境和飞行员的真实感觉。例如在环境图像生成中，以50Hz的频率生成彩色图像，而且具有纹理，还有亮点、透明、天气效果（如雾、雨、雪、晴、云等）、非线性图像映射、碰撞检测、高山地形、细节模拟等等。如飞机着陆时跑道灯应按飞机着陆角度不同而变换颜色，并能确认飞机与跑道上其他飞机甚至建筑物的相互距离。又如在虚拟现实仿真中，飞行员必须体验到真实飞行的感觉，尤如真正在一个真实飞机的机舱里，每个仪表都必须如在真实环境下工作，油表指示必须反映虚拟引擎对油的使用率，并且还必须精确地反映动力和温度。在飞机接触跑道时，还必须有真实的冲击感和震动感。显然对于价值数千万美元的飞机来说，让飞行员在虚拟现实仿真系统中训练是最合算的，它既不危及人的生命安全，又不损坏飞机，也不造成公害。所以各类仿真模拟训练器都已被广泛应用。

### 办公自动化和管理信息系统

顾名思义，办公自动化是利用计算机及自动化的办公设备来替代“笔、墨、纸、砚”“文房四宝”及办公人员的部分脑、体力劳动，从而提高了办公的质量和效率。例如，利用计算机来起草文件、登录文件；利用计算机来安排日常的各类公务活动，包括会议、会客、外出购票；利用计算机来收集各类信息，将各类信息以电子数字形式存于数据库内，并可随时进行查询、检索及修改。一个完整的办公自动化系统将包括文秘、财务、人事、资料、后勤等各项管理工作。近年来由于Intermet的应用，将计算机、自动化办公设备与通信技术相结合，使办公自动化向更高层次发展。例如电子邮件的收发，远距离会议或电视会议、高密度的电子文件、多媒体的信息处理等还将会普遍获得应用。

与办公自动化相应的信息管理系统是企业管理信息系统。由于信息技术的飞速发展造就了一个统一的全球市场，导致世界范围市场的激烈竞争。占领并主宰市场的关键在于如何不断开发独占性的产品，不断降低成本，以质优价廉的产品投入市场。实现这个目标离不开信息管理，通过信息的获取、分析，开发独占性产品；通过优化的信息管理，实现质优价廉产品的生产。目前世界各国的企业都充分利用信息技术与现代化管理相结合来产生最优化的生产模式、管理模式、设计技术和制造技术。

在企业建立一个管理信息系统，对内完成Intranet的建立，对外实现与Internet相连。通过外部可以迅速了解市场需求和展开全球销售活动，对内可以实现物资采购、生产调度、能耗控制、质量监控等，以最少的库存、最低的能源消耗、最快的生产周期、最佳的售后服务来提高企业的竞争力，并合理地组织各类人才，做出科学的决策，实现企业利润的最大化。

### CAD/CAM/CIMS

20世纪70年代中期，在现代工业生产领域中，已经开始利用计算机来参与产品辅助设计、产品辅助工艺设计、产品模拟样机、产品辅助制造，直至产品制造系统。到了20世纪80年代，这类计算机辅助技术（统称为CAX）有了更高速的发展，目前可以说在机械、电子、航空、船舶、汽车、纺织、服装、化工、建筑等各行各业中，CAX获得了极其广泛的应用，不仅提高了产品设计生产自动化的程度，而且给传统性的生产发展带来了革命性的变化。

#### CAD

计算机辅助设计（Computer Aided Design，CAD）按设计任务书的要求，可进行各种设计方案的比较，确定产品结构、外形尺寸、材料选择、模拟组装；再对模拟整机进行各种性能测试，包括强度分析、振动分析、运动状态分析等；并任意修正，从性能的先进性、经济的合理性、加工的可行性等方面进行论证，获得最终的设计产品；然后将其分解为零件、分装部件，并给出零件图、分部装配图、总体装配图等。上述全部工作都可以由计算机来完成，大大降低了产品设计的成本，缩短了产品设计的周期，最大限度地降低了产品设计的风险。因此CAD技术已被各制造业广泛应用。目前，随着计算机软、硬件技术的发展，已经可以利用计算机实现产品创意设计，设计者可以提出一个朦胧的思想，在计算机上进行概念设计，并进行不断修改与完善，最后确定一种新颖的产品。

#### CAM

计算机辅助制造（Computer Aided Manufacturing，CAM）是以数控机床为王体，利用存有全部加工资料的数据库（如刀具、夹具和各种零件的加工程序，以及在加工过程中的自动换刀及加工数据的控制），实现对产品加工的自动化。目前人们已经将数控、物料流控制及存储、机器人、柔性制造、生产过程仿真等计算机相关控制技术统称为计算机辅助制造。
利用计算机参与人脑的辅助工作非常普遍，而且还在不断开拓新的领域，如计算机辅助工艺规划（Computer Aided Process Planning，CAPP），计算机辅助工程（Computer Aided Engineering，CAE）及计算机辅助教学（Computer Assisted Instruction，CAI）等都得到越来越广泛的应用。

#### CIMS

计算机集成制造系统（Computer Integrated Manufacturing Systems，CIMS）是利用信息技术和现代管理技术改造传统制造业、加强新兴制造业、提高企业市场竞争能力的一种生产模式。具体而言，以企业选定的产品为龙头，在产品设计过程、管理决策过程、加工制造过程、产品质量管理和控制等过程中，采用各种计算机辅助技术和先进的科学管理方法，在计算机网络和数据库的支持下，实现信息集成，进而优化企业运行，达到产品上市快、质量好、成本低、服务好的目的，以此提高产品的市场占有率和企业的市场竞争能力。显然，要形成计算机集成制造系统的企业，必须广泛地采用CAD/CAE/CAPP/CAM，并且已经建立了企业的管理信息系统（Management Informa-
tion System，MIS），只有通过生产、经营各个环节的信息集成，支持技术集成，并由技术集成进入技术、经营管理和人员组织的集成，最终达到物流、信息流、资金流的集成并优化运行，才能提高企业的市场竞争能力和应变能力。

### 多媒体技术

多媒体技术是计算机技术和视频、音频及通信等技术集成的产物。它是用来实现人和计算机交互地对各种媒体（如文字、图形、影像、音频、视频、动画等）的采集、传输、转换、编辑、存储、管理，并由计算机综合处理为文字、图形、动画、音响、影像等视听信息而有机合成的新媒体。因此它既可以将原来仅仅能体现或保存一种媒体的设备或手段，转换为由计算机集成。例如传统的音响设备只能录音、放音；档案库只能存档文件；图书馆只能收藏书籍；电视只能提供音频和视频信息；电话只能传递语音等等。而今用多媒体技术使声、图、文合成后全部集成到计算机中。同时，利用计算机还可以制作、创造新的媒体信息，例如合成音乐、电子动画等等。它不但使我们社会显得格外绚丽多彩，生活显得格外富有幻想，而且它还会对政治、经济、军事、工业、环境等都产生巨大的影响。如上所述飞行仿真模拟，虚拟演播室等，都离不开多媒体技术。它的深远意义还会影响未来计算机人工智能技术的发展。因此，有关多媒体技术的研究和应用也是当前计算机技术的热点之一。

### 人工智能

人工智能是专门研究如何使用计算机来模拟人的智能的技术。尽管经过了近半个世纪的努力，被人们称之为“电脑”的计算机与“人脑”相比，仍无法相提并论。如集成度达1亿个晶体管的处理器芯片与人类的101~1012个神经元相比，简直无可比拟，因每个神经元远不是一个晶体管，很可能相当于一台高速运行的处理器。可见“电脑”要真正模拟“人脑”，特别是要使电脑具有人的经验知识以及通过联想、比拟、推断来作出决策的功能，至少从目前来看还有相当距离。

尽管如此，人们还是想尽一切办法，赋予“电脑”一部分人的智力功能，并且还在不断扩大和增强这种智力。近年来在模式识别、语音识别、专家系统和机器人制作方面都取得了很大的成就。

模式识别是指对某些感兴趣的客体作定量的或结构的描述，研究一种自动生成技术，由计算机自动地把待识别的模式分配到各自的模式类中去。由此技术派生的图像处理技术和图像识别技术已被广泛应用。例如对人体细胞显微图像分析，可确定内脏是否发生病变；对动、植物细胞显微图像分析，可确定环境是否被污染；对地表植物经遥感图像分析，可判断作物长势的预测等等，诸如此类包括公安系统的指纹分辨及身份、证件、凭证鉴别等等。

文字/语音识别、语言翻译是人工智能的一重要应用领域。自计算机问世后，人们就企图让计算机来承担文字、语言的翻译工作，实际上让计算机正确认识文字和语音，正确理解自然语言，实现正确的语言翻译还是十分困难的。虽然经过几十年的努力，目前已有了很大的进展，如手写体的计算机输入系统已被广泛使用，语音录入计算机的软件也开始在市场上问世，当然它的正确识辨率还有待进一步提高。此外，在自然语言理解的基础上研制成的文字/语言翻译机也在陆续问世，但离人们的实用要求还有一定距离，不过这些技术的突破看来是指日可待的，使计算机会听、会看、会说的时代已经不是很遥远了。

专家系统是人工智能的又一重要应用领域。它是利用计算机构成储存量极大的知识库，把各类专家丰富的知识和经验，以数据形式储存于知识库内，通过专用软件，根据用户输入查询的要求，向用户作出所要求的解答。这种系统早已被广泛应用在医学、工程、军事、法律等领域，尤其是近年来Internet的出现，更可以构成远程虚拟医疗、虚拟课堂、虚拟考试等。

机器人的出现也是人工智能领域的一项重要应用。通常人们让机器人作一些重复性的劳动，特别是在一些不适宜人们工作的劳动场所，机器人的应用显得格外重要。例如海底探测，人在海底的时间是非常有限的，如果让机器人进行海底探测就方便多了。可以让机器人配上摄像机，构成它的眼睛；配上双声道的声音接收器，变成它的耳朵；再配上合适的机械装置，使它可以活动、触摸、承受各种信息并直接送到计算机进行处理，这样它就可以模仿人完成海底探测。现在还有一些更高级的“智能机器人”，具有一定的感知和识别能力，还能简单的说话和回答问题。总之，随着科学技术的不断发展，更高级的机器人将会不断出现。

## 计算机的展望

从1946年ENIAC问世至今，50多年来计算机技术的进步推动了计算机的发展和广泛的应用，使计算机在人类的全部活动领域里占有极为重要的地位。从超级巨型机到心脏起博器，从电话网络到汽车的汽化器无处不在，无所不及，几乎能填补甚至取代各类信息处理器，成为人类最得力的助手。

在即将进入21世纪的岁月里，世界上不少科学家预言，到了2046年人类社会几乎所有的知识和信息将全部融入于电脑空间，而任何人在任何地方任何时间都可以通过网络，对所有的知识和信息进行在线获取。这个预测是大家所希望的，也是必定会实现的。电脑空间将会为崭新的信息方式、娱乐方式和教育方式提供基础，并会提供新层次的个人服务和健康保健，最大的受益将是人们可以在远距离与他人进行全感知的交流。

实现上述目标在技术上还需有很大的突破，至少在电脑的容量、速度及网络的带宽上，前的差距还是很大的。

最理想的信息处理、存储机构还是人脑，它具有每秒1015的计算速度和1013字节的存储容量，何况它还具有自组织、自适应、自联想、自修复的智能特性。
因此，人们期待着下世纪有超级智能计算机的出现。

20世纪七八十年代，人工智能的研究曾一度出现过高潮。日本首先提出研究具有高度智能的计算机。但后来人们发现，高度智能计算机的实现比早期创始者的想像要难得多，不过人们仍然还在孜孜不倦地探索着。

由于受物理极限的制约，VLSI晶体管本身的线宽大约在0.05微米量级，因此Moore定律不可能无限期延续。另一方面，在芯片集成度不断提高的同时，其制造成本也在不断提高，即在微电子工业发展中还遵循另一规律：“每代芯片的成本大约为其前一代芯片成本的两倍”。目前，建造一个生产0.25微米工艺芯片的车间大约需20 ~ 25亿美元，而使用0.18微米工艺时，费用将跃到30~40亿美元。按这一成本几何比递增的情况发展，在未来10年内，该费用将超过100亿美元。因此，综合考虑技术和经济的限制，Intel的技术负责人认为：“微电子工业以Moore定律几何比增长的态势最多可延续到2017年。”人们通过新的材料如嫁砷化物以及正在开发的量子晶体管，仍然希望在高速低能耗方面开拓新的进展。此外，现代计算机采用高并行度的体系结构，通过大量高速处理器的高带宽局域网连接，使它具有类似人脑的高并行性的本质。所以，大多数专家对于计算机能力增长的前景都持有乐观的态度。可以比较确切地说，实现人类级的智能所需的硬件可能在下世纪的前四分之一的时间内具备，这与20世纪70年代计算机的硬件能力只够得上“昆虫级”的智能相比，显然应该更充满信心。

超级智能电脑不仅需要有硬件支撑，而且还必须有软件支持。模拟大脑功能创建超级智能电脑，除了通过足够的硬件能力和适应电脑学习的软件外，还需有足够的初始体系结构和丰富的感官输入流。当前的技术对后者已经很容易满足，如采用视觉照相机、扬声器和各类触觉传感器，能保证特定的实时世界信息流流入电脑。而前者则更难实现，因为大脑并非一开始就是一片空白。它有一个遗传可编码的初始结构，存在着神经皮层可塑性、大脑皮层的相似性及进化的论点。这些问题的解决必须随着神经科学的进一步发展，在对人脑的神经结构和它的学习算法了解得足够多的前提下，在具有很强计算能力的计算机上实现复制。科学家的估计大约在今后15年内，采用当前的设备支持输入输出渠道，对人脑继续研究，发现新的电脑学习方法和对新神经科学的深入研究，超级智能电脑的出现是势不可挡的必然趋势，只是时间问题。

进入新世纪除了人们继续追求超级智能计算机的问世外，更引起人们注目的是价格低廉的、使用方便的、体积更小的、外型多变的、具有人性化的电脑的研究和应用。

虽然电脑强大的功能促使它去处理相当多的事，但至今还存在着不尽人意的缺点。因此，普及面仍未达到应有的程度。其原因主要在于对绝大多数人而言，还不能非常方便地对它进行操作，而且很难适应各种场合的需要。因此，除了继续提高芯片主频外，在输入输出方式上应有更多的性能突破。输入输出将随时可见，包括汽车、家电、电话、电视、玩具、手表等等。而且还可用人的手势、表情、眼睛瞳孔的位置、甚至利用人体的气味、体温来控制输入。三维图像输出将能实时地合成真实的视频图像，包括完整的戏剧电影，还允许计算机合成的图像和人面对面交谈。利用平面液晶显示器将如同眼镜一般放在眼睛前面，构成可移动的电脑。

电脑的外形及尺寸将随着不同的对象和环境而变化，甚至朝着个人量身定做的方向发展。特别是嵌入式的电脑，可以遍及汽车、房间、车站、机场及各种建筑场，使用者利用随身携带的信息操作器具，不需做任何连接方式，利用红外线传输方式，随时从公共场所服务器主机上接收所需的信息，包括个人的电子邮件等。尤其是个人身上穿戴的计算机连同身上网络，可以随时随地为你的健康、安全以及帮助你在复杂的物理空间环境中工作，如汽车、飞机驾驶等。

在普及型的电脑发展的同时，大型系统也将获得巨大发展，将由低价、通用的多处理机组成的群机系统来替代单一的大型系统。在这个群机系统中，每个计算机通过快速的系统级网络（SAN）和其他计算机通信。群机系统可以扩展到上千个结点，对于数据库和即时事务处理（OLTP）的应用，群机能像单机一样地运转。群机能开发隐含在处理并行多用户中或在处理包含在多个存储设备的大型查询中的并行性。一个具有几十个结点的PC群机系统，每天可执行十亿多次事务处理，比目前最大的大型机吞吐量还大。还可预知科学计算将在高度专用、类似CRAY的多向量结构的计算机上运行。

前面提到的网络带宽问题，到2046年，每光波长携带几个G的光纤将会很普遍地进入到广大家庭用户，到那时任意宽的带宽都可以传输。它们将为你的电话、可视电话、电视、网络访问、安全监控、家庭能源管理以及其他各种服务。

虽然我们不能对未来的电脑预知得那么清晰，那么准确，但是，仅就上述的描述，也就可以想像几十年后，电脑给人类带来的绚丽多彩的生活和人类社会的美好憧景决不是幻想。

<strong style=color:red> 希望年轻的学者能在自身的数十年奋斗中，为电脑的发展和应用发挥自己的聪明才智，为人类社会的进步增添一砖一瓦。</strong>

(看到这句话有点激动，虽然自己现在是个弱鸡--2019.12.10)

# 第三章：系统总线

## 总线的基本概念

计算机系统的五大部件之间的互连方式有两种，一种是各部件之间通过单独的连线，叫做分散连接；另一种是将各部件连到一组公共信息传输线上，叫做总线连接。

早期的计算机大多数用分散连接方式，如图1.7所示。它是以运算器为中心的结构，其内部连线十分复杂，尤其是当I/O与存储器交换信息时，都需经过运算器，致使运算器停止运算，严重影响了CPU的工作效率。后来，虽然改进为以存储器为中心的如图1.8所示的分散连接结构，IVO与主存交换信息可以不经过运算器，又采用了中断、DMA等技术，使CPU工作效率得到很大的提高，但是仍无法解决I/O设备与主机之间连接的灵活性。随着计算机应用领域的不断扩大，IVO设备的种类和数量也越来越多，人们希望随时增添或减撤设备，用分散连接方式简直是一愁莫展，由此出现了总线连接方式。

总线是连接多个部件的信息传输线，是各部件共享的传输介质。当多个部件与总线相连时，如果出现两个或两个以上部件同时向总线发送信息，势必导致信号冲突，传输无效。因此，在某一时刻，只允许有一个部件向总线发送信息，而多个部件可以同时从总线上接收相同的信息。

总线实际上是由许多传输线或通路组成，每条线可传输一位二进制代码，一串二进制代码可在一段时间内逐一传输完成。若干条传输线可以同时传输若干位二进制代码，如16条传输线组成的总线，可同时传输16位二进制代码。
采用总线连接的计算机结构，如图3.1所示，它是以CPU为中心的双总线结构。

![](读书笔记：计算机组成原理(唐朔飞)/15.png)

其中一组总线连接CPU和主存，叫存储总线（M总线），另一组用来建立CPU和各I/O之间交换信息的通道，叫输入/输出总线（I/O总线），各种/O设备通过VO接口挂到I/O总线上。这种结构在/O设备与主存交换信息时仍然要占用CPU，因此还会影响CPU的工作效率。

倘若将CPU、主存和VO设备（通过I/O接口）都挂到一组总线上，便形成单总线结构的计算机，如图3.2所示。

![](读书笔记：计算机组成原理(唐朔飞)/16.png)

图3.2与图3.1相比，最明显的特点是当I/O与主存交换信息时，原则上不影响CPU的工作，CPU仍可继续处理不访问主存或I/O的操作，这就使CPU工作效率有所提高。但是，因为只有一组总线，当某一时刻各部件都要占用时，就会出现争夺现象。为此，总线内部必须设判优机构，让各部件按优先级高低占用总线，这会影响整机工作速度。PDP-11和国产DJS183机采用这种结构。

还有一种以存储器为中心的双总线结构，如图3.3所示。

![](读书笔记：计算机组成原理(唐朔飞)/17.png)

它是在单总线基础上，又单独开辟一条CPU与主存之间的通路，叫存储总线。这组总线速度高，只供主存与CPU之间传输信息。这样既提高了传输效率，又减轻了系统总线的负担，还保留了I/O与存储器交换信息时不经过CPU的特点。国产DJS184机采用这种结构。

现代计算机大多数采用各类总线结构。

## 总线的分类

总线的应用很广泛，从不同角度可以有不同的分类方法。按数据传送方式可分为并行传输总线和串行传输总线。在并行传输总线中，又可按传输数据宽度分8位、16位、32位、64位等传输总线。若按总线的使用范围划分，则又有计算机（包括外设）总线、测控总线、网络通信总线等。下面按连接部件的不同，分几类介绍总线。

### 片内总线

片内总线是指芯片内部的总线，如在CPU芯片内部，寄存器与寄存器之间、寄存器与算逻单元ALU之间都有总线连接。

### 系统总线

系统总线是指CPU、主存、I/O（通过I/O接口）各大部件之间的信息传输线。由于这些部件通常都制作在各个插件板上，故又叫作板级总线（即在一块电路板上各芯片间的连线）和板间总线。

按系统传输信息的不同，又可分为三类：**数据总线，地址总线和控制总线**。

1. 数据总线

   数据总线用来传输各功能部件之间的数据信息，它是双向传输总线，其位数与机器字长、存储字长有关，一般为8位、16位或32位。数据总线的条数称为数据总线宽度，它是衡量系统性能的一个重要参数。如果数据总线的宽度为8位，指令字长为16位，那么，CPU在取指阶段，必须两次访问主存。

   > 机器字长是指计算机进行一次整数运算所能处理的二进制数据的位数（整数运算即定点整数运算）。因为计算机中数的表示有定点数和浮点数之分，定点数又有定点整数和定点小数之分，这里所说的整数运算即定点整数运算。机器字长也就是运算器进行定点数运算的字长，通常也是CPU内部数据通路的宽度。
   >
   > 机器字长反映了计算机的运算精度，即字长越长，数的表示范围也越大，精度也越高。机器的字长也会影响机器的运算速度。倘若CPU字长较短，又要运算位数较多的数据，那么需要经过两次或多次的运算才能完成，这样势必影响整机的运行速度。
   >
   > 机器字长与主存储器字长通常是相同的，但也可以不同。不同的情况下，一般是主存储器字长小于机器字长，例如机器字长是32位，主存储器字长可以是32位，也可以是16位，当然，两者都会影响CPU的工作效率。
   >
   > 衡量机器字长的单位可用“位（bit）”，位是计算机内最小的信息单位。8位构成一个“字节（byte）”，现代计算机的机器字长一般都是8位的整数倍，如8位，16位、32位、64位和128位等，即字长分别为2个字节、4个字节或是16个字节，所以也可以用“字节”来表示机器字长。字长的值是不固定的，对于不同的CPU，字长的值也可能不一样。8位的CPU一次只能处理一个字节，而32位的CPU一次就能处理4个字节，同理，字长为64位的CPU一次可以处理8个字节。

   [机器字长](<https://baike.baidu.com/item/%E6%9C%BA%E5%99%A8%E5%AD%97%E9%95%BF>)

2. 地址总线

   地址总线主要用来指出数据总线上的源数据或目的数据在主存单元的地址。例如，欲从存储器读出一个数据，则CPU要将此数据所在存储单元的地址送到地址线上。又如，欲将某数据经I/O设备输出，则CPU除了需将数据送到数据总线外，同时还需将该输出设备的地址（通常都经I/O接口）送到地址总线上。可见，地址总线上的代码是用来指明CPU欲访问的存储单元或/O端口的地址，它是单向传输的。地址线的位数与存储单元的个数有关，如地址线为20根，则对应的存储单元个数为2^20^。

3. 控制总线

   由于数据总线、地址总线都是被挂在总线上的所有部件共享的，如何使各部件能在不同时刻占有总线使用权，需依靠控制总线来完成，因此控制总线是用来发出各种控制信号的传输线。对任一控制线而言，它的传输只能是单向的。
   例如，命令存储器读/写或命令I/0读/写都是由CPU发出的。但对于控制总线总体来说，又可认为是双向的。例如VO设备也可以向CPU发出请求信号。如当某设备准备就绪时，便向CPU发中断请求；又如当某部件（如DMA接口）需获得总线使用权时，就得向CPU发出总线请求等等。此外，控制总线还起到监视各部件状态的作用。如查询该设备是处于“忙”还是“闲”，是否出错等等。因此总体而言，控制信号既有出，又有入。

常见的控制信号有：

* 时钟                 用米同步各种操作；
* 复位                 表示各模块恢复初始状态；
* 总线请求         表示某部件需获得总线使用权；
* 总线允许         表示需要获得总线使用权的部件已获得了控制权；
* 中断请求         表示某部件提出中断请求；
* 中断确认         表示中断请求以被接收；
* 存储器写         将数据总线上的数据写至存储器的指定地址单元内；
* 存储器读         将指定存储单元中的数据读到数据总线上；
* I/O读               从指定的I/O端口将数据读到数据总线上；
* I/0写                将数据总线上的数据输出到指定的I/O端口内；
* 数据确认         表示数据已被接收或已被读到总线上。

### 通信总线

这类总线用于计算机系统之间或计算机系统与其他系统（如控制仪表、移动通讯等）之间的通信。由于这类联系涉及到许多方面，如外部连接、距离远近、速度快慢、工作方式等等，差别极大，因此通信总线的类别很多。但按传输方式可分为两种：串行通信总线和并行通信总线。

## 总线特性及性能指标

### 总线特征

从物理角度来看，总线就是一组电导线，许多导线直接印制在电路板上，延伸到各个部件。图3.4形象地表示了各个部件与总线之间的物理摆放位置。

![](读书笔记：计算机组成原理(唐朔飞)/18.png)

图中CPU、M.M、I/O都是部件插板，它们通过插头与水平方向总线插槽（按总线标准用印刷电路板或一束电缆连接而成的多头插座）连接。为了保证机械上的可靠连接，必须规定其机械特性；为了确保电气上正确连接，必须规定其电气特性；为保证正确地连接不同部件，还需规定其功能特性和时间特性。

（1）机械特性

机械特性是指总线在机械连接方式上的一些性能，如插头与插座使用的标准，它们的几何尺寸、形状、引脚的个数以及排列的顺序，接头处的可靠接触等等。

（2）电气特性

电气特性是指总线的每一根传输线上信号的传递方向和有效的电平范围。
通常规定由CPU发出的信号叫输出信号，送入CPU的信号叫输入信号。如地址总线属于单向输出线，数据总线属于双向传输线，它们都定义为高电平有效。控制总线的每一根都是单向的，但从整体看，有输入，也有输出。有的定义为高电平有效，也有的定义为低电平有效，必须注意不同的规格。不过，总线的电平定义与TTL是相符的。如RS-232C（串行总线接口标准），其电气特性规定低电平表示逻辑“1”，并要求电平低于-3V；用高电平表示逻辑“0”，还要求高电平需高于+3V，额定信号电平为-10V和+10V左右。

（3）功能特性

功能特性是指总线中每根传输线的功能，如地址总线用来指出地址号；数据总线传递数据；控制总线发出控制信号，既有CPU发出的，如存储器读/写、 I/O读/写；也有I/O向CPU发来的，如中断请求、DMA请求等。可见各条线其功能不一。

（4）时间特性

时间特性是指总线中的任一根线在什么时间内有效。每条总线上的各种信号，互相存在着一种有效时序的关系，因此，时间特性一般可用信号时序图来描述。

### 总线性能指标

①总线宽度：它是指数据总线的根数，用bit（位）表示，如8位、16位、32位、64位（也即8根、16根、32根、64根）。

②标准传输率：即在总线上每秒能传输的最大字节量，用MB/s（每秒多少兆字节）表示。如总线工作频率为33MFHz，总线宽度为32位，则它最大的传输率为132MB/s。

③时钟同步/异步：总线上的数据与时钟同步工作的总线称同步总线，与时钟不同步工作的总线称异步总线。

④总线复用：通常地址总线与数据总线在物理上是分开的两种总线。地址总线传输地址码，数据总线传输数据信息。为了提高总线的利用率，优化设计，特将地址总线和数据总线共用一组物理线路，只是某一时刻该总线传输地址信号，另一时刻传输数据信号或命令信号。这叫做总线的多路复用。

⑤信号线数：即地址总线、数据总线和控制总线三种总线数的总和。

⑥总线控制方式：包括并发工作、自动配置、仲裁方式、逻辑方式、计数方式等。

⑦其他指标：如负载能力问题。由于不同的电路对总线的负载是不同的，即使同一电路板在不同的工作频率下，总线的负载也是不同的，因此，总线负载能力的指标不是太严格的。通常用可连接扩增电路板数来反映总线的负载能力。此外，还有如电源电压是5V还是3.3V、总线能否扩展64位宽度等等，也十分重要。

表3.1列出了几种流行的微机总线性能，可供参考。

![](读书笔记：计算机组成原理(唐朔飞)/19.png)

### 总线标准

总线是在计算机系统模块化的发展过程中产生的，随着计算机应用领域的不断扩大，计算机系统中各类模块（特别是I/O设备所带的各类接口模块），其品种极其繁杂，往往出现一种模块要配一种总线，很难在总线上更换、组合各类模块或设备。20世纪70年代末，为了使系统设计简化，模块生产批量化，确保其性能稳定，质量可靠，实现可移化，便于维护等，人们开始研究如何使总线建立标准，在总线的统一标准下，完成系统设计，模块制作。这样，系统、模块、设备与总线之间不适应、不通用及不匹配的问题就迎刃而解了。所谓总线标准，可视为系统与各模块、模块与模块之间的一个互连的标准界面。这个界面对它两端的模块都是透明的，即界面的任一方只需根据总线标准的要求完成自身一面接口的功能要求，而无需了解对方接口与总线的连接要求。因此，按总线标准设计的接口可视为通用接口。

目前流行的总线标准有：

（1）ISA（Industrial Standard Architecture）总线是IBM为了采用全16位的CPU而推出的，又称AT总线，它使用独立于CPU的总线时钟，因此CPU可以采用比总线频率更高的时钟，有利于CPU性能的提高。由于ISA总线没有支持总线仲裁的硬件逻辑，因此它不能支持多台主设备（即不支持多台具有申请总线控制权的设备）系统，而且ISA上的所有数据的传送必须通过CPU或DMA（直接存储器存取）接口来管理，因此使CPU花费了大量时间来控制与外部设备交换数据。ISA总线时钟频率为8MHz，最大传输率为16MB/s，数据线为16位，地址线为24位。

（2）EISA（Extended Industrial Standard Architecture）是一种在ISA基础上扩充开放的总线标准，它与ISA可以完全兼容，它从CPU中分离出了总线控制权，是一种具有智能化的总线，能支持多总线主控和突发方式的传输。EISA总线的时钟频率为8MHz，最大传输率可达33MB/s，数据总线为32位，地址总线为32位，扩充DMA访问范围达2^32^。

（3）VL-BUS是由VESA（Video Electronic Standard Association视频电子标准协会）提出的局部总线标准。所谓局部总线是指在系统外，为两个以上模块提供的高速传输信息通道。VL-BUS是由CPU总线演化而来的，采用CPU的时钟频率达33MHz、数据线为32位，配有局部控制器。通过局部控制器的判断，将高速I/O直接挂在CPU的总线上，实现CPU与高速外设之间的高速数据交换（参见图3.10）。

（4）PCI（Peripheral Component Interconnect外部设备互连总线）是由ntel公司提供的总线标准。它与CPU时钟频率无关，自身采用33MHz总线时钟，数据线为32位，可扩充到64位，数据传输率达132MB/s~246MB/s。具有很好的兼容性，与ISA，EISA总线均可兼容，可以转换为标准的ISA、EISA。
它能支持无限读写突发方式，速度比直接使用CPU总线的局部总线快。它可视为CPU与外设间的一个中间层，通过PCI桥路（PCI控制器）与CPU相连。

PCI 控制器有多级缓冲，可把一批数据快速写入缓冲器中。在这些数据不断写入PCI设备过程中，CPU可以执行其他操作，即PCI总线上的外设与CPU可以并行工作。

PCI总线支持两种电压标准：5V与3.3V。3.3V电压的PCI总线可用于便携式微机中。

EISA和PCI都具有**即插即用**（plug and play）的功能，即任何扩展卡只要插入系统便可工作，尤其是PCI采用的技术非常完善，它为用户提供了真正的即插即用功能。

PCI总线可扩充性好，当总线驱动能力不足时，可以采用多层结构（见图3.12）。每个PCI还配有一个延时器，它规定系统中设备使用PCI总线的最长时间周期，CPU通过PCI总线上的所有设备延时器来优化系统的性能。

有关各总线的实例将在3.4.3中介绍。

## 总线结构

总线结构通常可分为单总线和多总线两种。

### 单总线结构

图3.2是单总线结构的示意，它是将CPU、主存、I/O设备（通过I/O接口）都挂在一组总线上，允许I/O之间或I/O与主存之间直接交换信息。这种结构简单，也便于扩充，但所有的传送都通过这组共享总线，因此极易形成计算机系统的瓶颈。它也不允许两个以上的部件在同一时刻向总线传输信息，这就必然会影响系统工作效率的提高。这类总线多数为小型机或微型机所采用。计算机应用范围越扩大，其外部设备的种类和数量就越多，并且它们对数据传输的量和传输速度的要求也就越来越高。倘若仍然采用单总线结构，那么，当I/O设备量很大时，总线发出的控制信号从一端逐个顺序传递到第n个设备，其传播的延迟时间就会严重地影响系统的工作效率。在数据传输需求量和传输速度要求不太高的情况下，为克服总线瓶颈问题，尽可能采用增加总线宽度和提高传输速率来解决；但当总线上的设备如高速视频显示器、网络传输接口等，其数据量很大和传输速度要求相当高的时候，单总线结构怎么也满足不了系统工作的需要。因此，为了根本解决数据传输速率，解决CPU、主存与I/O设备之间传输速率的不匹配，实现CPU于其他设备相对同步，不得不采用多总线结构。

### 多总线结构

图3.5是双总线结构的示意图。

双总线结构的特点是将速度较低的I/O设备从单总线上分离出来，形成主存总线与I/O总线分开的结构。图中通道是一个具有特殊功能的处理器，CPU将一部份功能下放给通道，使其对I/O设备具有统一管理的功能，以完成外部设备与主存之间的数据传送，其系统的吞吐能力可以相当大。这种结构大多用于大、中型计算机系统。

如果将速率不同的I/O设备进行分类，然后将它们连接在不同的通道上，那么计算机系统的利用率将会更高，由此发展成多总线结构。

![](读书笔记：计算机组成原理(唐朔飞)/20.png)

图3.6是三总线结构的示意。

![](读书笔记：计算机组成原理(唐朔飞)/21.png)

图中主存总线用于CPU与主存之间的传输；IVO总线供CPU与各类/O之间传递信息；DMA总线用于高速外设（磁盘、磁带等）与主存之间直接交换信息。在三总线结构中，任一时刻只能使用一种总线。主存总线与DMA总线不能同时对主存进行存取，I/O总线只有在CPU执行I/O指令时才用到。

图3.7是另一种三总线结构的示意。

由图可见，处理器与高速缓冲存储器Cache之间有一条局部总线，它将CPU与Cache或与更多的局部设备连接。Cache的控制机构（详见4.3节）不仅将Cache连到局部总线上，而且还直接连到系统总线上，这样Cache就可通过系统总线与主存传输信息。而且I/O与主存之间的传输也不必通过CPU。还有一条扩展总线，它将局域网、小型计算机接口（SCSI）、调制解调器（Modem）
以及串行接口等都连接起来，并且通过这些接口又可与各类I/O设备相连，因此它可支持相当多的I/0设备。与此同时，扩展总线又通过扩展总线接口与系统总线相连，由此便可实现这两种总线之间的信息传递，可见其系统的工作效率明显地提高。

![](读书笔记：计算机组成原理(唐朔飞)/22.png)

为了进一步提高I/O的性能，使其更快地响应命令，又出现了四总线结构，如图3.8所示。

![](读书笔记：计算机组成原理(唐朔飞)/23.png)

在这里又增加了一条与计算机系统紧密相连的高速总线。在高速总线上挂接了一些高速性能的外设，如高速局域网、图形工作站、多媒体、SCSI等。它们通过Cache控制机构中的高速总线桥或高速缓冲器与系统总线和局部总线相连，使得这些高速设备与处理器更密切。而一些较低速的设备如图文传真FAX、调制解调器及串行接口仍然挂在扩展总线上，并由扩展总线接口与高速总线相连。

这种结构对高速设备而言，其自身的工作可以很少依赖处理器，同时它们又比扩展总线上的设备更贴近处理器，可见对于高性能设备与处理器来说，各自的效率将获得更大的提高。在这种结构中，处理器、高速总线的速度以及各自信号线的定义完全可以不同，以至各自改变其结构也不会影响高速总线的正常工作，反之亦然。

### 总线结构举例

图3.9是传统微机总线的结构示意。

![](读书笔记：计算机组成原理(唐朔飞)/24.png)

由图可见，不论高速局域网、高性能图形还是低速的FAX、Modem都挂接在ISA或EISA总线上，并通过ISA或EISA总线控制器与系统总线相连，这样势必出现总线数据传输的瓶颈。只有将高速、高性能的外设，如高速局域网、高性能图形等尽量靠近CPU本身的总线，并与CPU同步或准同步，才可能消除瓶颈问题。这就要求改变总线结构，来提高数据传送速率，为此，出现了图3.10的VL-BUS局部总线结构。

由图可见，将原先挂在ISA总线上的高速局域网、多媒体卡、高性能图形板等从ISA总线卸下来，挂到局部总线VL-BUS上，再与系统总线相连。而将打印机、FAX、Modem等低速设备仍挂在ISA总线上。局部总线VL-BUS就相当于在处理器与高速外设之间架上了高速通道，使CPU与高性能外设得到充分发挥，满足了图形界面软件的要求。

![](读书笔记：计算机组成原理(唐朔飞)/25.png)

由于VL-BUS是从CPU总线演化来的，与CPU的关系太紧密（实际上这种总线与486配合最佳），以至很难支持功能强的CPU，从而出现了PCI总线。

图3.11是PCI总线结构示意图。

![](读书笔记：计算机组成原理(唐朔飞)/26.png)

从此图可见，PCI总线是通过PCI桥路（包括PCI控制器和PCI加速器）与CPU总线相连。这种结构使CPU总线与PCI总线互相隔离，具有更高的灵活性，可以支持更多的高速运行设备，而且具有即插即用的特性。当然，挂在PCI总线上的设备都要求数据传输速率高的设备，如多媒体卡、高速局域网适配器、高性能图形板等，与高速CPU总线是相匹配的。至于低速的FAX、Modem、打印机仍然挂在ISA、EISA总线上。

当PCI总线驱动能力不足时，可采用多层结构，如图3.12所示。

![](读书笔记：计算机组成原理(唐朔飞)/27.png)

## 总线控制

由于总线上连接着许许多多个部件，什么时候由哪个部件发送信息；如何给信息传送定时；如何防止信息丢失；如何避免多个部件同时发送；如何规定接受信息的部件等等一系列问题，都需要由总线控制器统一管理。它主要包括判优控制（或称仲裁逻辑）和通信控制。

### 总线判优控制

总线上所连接的各类设备，按其对总线有无控制功能可分为主设备和从设备两种。主设备对总线有控制权，从设备只能响应从主设备发来的总线命令。总线上信息的传送是由主设备启动的，如某个主设备欲与另一个设备（从设备）进行通信时，首先由主设备发出总线请求信号，若多个主设备同时要使用总线时，就由总线控制器的判优、仲裁逻辑按一定的优先等级顺序，确定哪个主设备能使用总线。只有获得总线使用权的主设备才能开始传送数据。

总线判优控制可分集中式和分布式两种，前者将控制逻辑集中在一处（如在CPU中），后者将控制逻辑分散在与总线连接的各个部件或设备上。

常见的集中控制有三种优先权仲裁方式：

(1)链式查询

链式查询方式如图3.13（a）所示。图中控制总线中有三根线用于总线控制（BS总线忙、BR总线请求、BG总线同意），其中总线同意信号BG是串行地从一个VO接口送到下一个I/O接口。如果BG到达的接口有总线请求，BG信号就不再往下传，意味着该接口获得了总线使用权，并建立总线忙BS信号，表示它占用了总线。可见在查询链中，离总线控制部件最近的设备具有最高的优先级。这种方式的特点是：只需很少几根线就能按一定优先次序实现总线控制，并且很容易扩充设备，但对电路故障很敏感。

(2)计数器定时查询

计数器定时查询方式如图3.13（b）所示。与本图（a）相比，多了一一组设备地址线，少了一根总线同意线BG。总线控制部件接到由BR送来的总线请求信号后，在总线未被使用（BS=0）的情况下，由计数器开始计数，向各设备发出一组地址信号。当某个有总线请求的设备地址与计数值一致时，便获得总线使用权，此时终止计数查询。这种方式的特点是：计数可以从“0”开始，此时设备的优先次序是固定的；计数也可以从终止点开始，即是一种循环方法，此时设备使用总线的优先级相等；计数器的初始值还可由程序设置，故优先次序可以改变。此外，对电路故障不如链式查询方式敏感，但增加了主控制线（设备地址）数，控制也较复杂。

(3)独立请求方式

独立请求方式如图3.13（c）所示。由图可见，每一设备均有一对总线请求线BR，和总线同意线BG；。当设备要求使用总线时，便发出该设备的请求信号。总线控制部件中有一排队电路，可根据优先次序确定响应哪一设备的请求。这种方式的特点是：响应速度快，优先次序控制灵活（通过程序改变），但控制线数量多，总线控制更复杂。链式查询中仅用两根线确定总线使用权属于哪个设备，在计数查询中大致用logzn根线，其中n是允许接纳的最大设备数，而独立请求方式需采用2n根线。

![](读书笔记：计算机组成原理(唐朔飞)/28.png)

### 总线通信控制

众多部件共享总线，在争夺总线使用权时，只能按各部件的优先等级来解决。而在传送通信时间上，只能按分时方式来解决，即哪一个部件获得使用，此刻就由它传送，下一部件获得使用，接着下一时刻传送。这样一个接一个轮流交替传送。

总线在完成一次传输周期时，可分为四个阶段：

* 申请分配阶段：由需要使用总线的主模块（或主设备）提出申请，经总线仲裁机构决定下一传输周期的总线使用权授于某一申请者；

* 寻址阶段：取得了使用权的主模块，通过总线发出本次打算访问的从模块（或从设备）的存储地址或设备地址及有关命令，启动参与本次传输的从模块；

* 传数阶段：主模块和从模块进行数据交换，数据由源模块发出经数据总线流入目的模块；

* 结束阶段：主模块的有关信息均从系统总线上撤除，让出总线使用权。

对于仅有一个主模块的简单系统，就无需申请、分配和撤除了，总线使用权始终归它占有。对于包含中断、DMA控制或多处理器的系统，还得有某种分配管理机构来参与。

总线通信控制主要解决通信双方如何获知传输开始和传输结束，以及通信双方如何协调如何配合。一般常用四种方式：**同步通信、异步通信、半同步通信和分离式通信**。

1. 同步通信

   通信双方由统一时标控制数据传送称为同步通信。时标通常由CPU的总线控制部件发出，送到总线上的所有部件；也可以由每个部件各自的时序发生器发出，但必须由总线控制部件发出的时钟信号对它们进行同步。

   图3.14表示某个输入设备向CPU传输数据的同步通信过程。

   ![](读书笔记：计算机组成原理(唐朔飞)/29.png)

   图中总线传输周期是总线上两个部件完成一次完整而可靠的传输时间，它包含4个时钟周期T~1~、T~2~、T~3~、T~4~。

   主模块在T~1~时刻发出地址信息；T~2~时刻发出读命令；从模块按照所指定的地址和命令进行一系列内部动作，必须在T~3~时刻前找到CPU所需的数据，并送到数据总线上；CPU在T~3~时刻开始，一直维持到T~4~时刻，可以从数据线上获取信息并送到其内部寄存器中；T~4~时刻开始输入设备不再向数据总线上传送数据，撤消它对数据总线的驱动。如果总线采用三态驱动电路，则从T~4~起，数据总线呈浮空状态。

   同步通信在系统总线设计时，T~1~、T~2~、T~3~、T~4~都有明确的、唯一的规定。

   对于读命令，其传输周期为：

   T~1~   主模块发地址

   T~2~   主模块发读命令

   T~3~   从模块提供数据

   T~4~   主模块撤销读命令

   对于读命令，其传输周期为：

   T~1~       主模块发地址

   T~1.5~     主模块提供数据

   T~2~       主模块发出写命令，从模块接收到命令后，必须在规定时间内将数据总线上的数据写到到地址

   ​           总线所指明的单元中。

   T~4~       主模块撤销写命令和数据等信号

   上述时序如图3.15所示

   ![](读书笔记：计算机组成原理(唐朔飞)/30.png)

   这种通信的优点是规定明确、统一，模块间的配合简单一致。其缺点是主从模块时间配合属强制性“同步”，必须在限定时间内完成规定的要求。并且对所有从模块都用同一限时，这就势必造成对各不相同速度的部件而言，必须按最慢速度部件来设计公共时钟，严重影响总线的工作效率，也给设计带来了局限性，缺乏灵活性。
   同步通信一般用于总线长度较短，各部件存取时间比较一致的场合。

2. 异步通信

   异步通信克服了同步通信的缺点，允许各模块速度的不一致性，给设计者充分的灵活性和选择余地。它没有公共的时钟标准，不要求所有部件严格的统一动作时间，而是采用应答方式（又称握手方式），即当主模块发出请求（Request）信号时，一直等待从模块反馈回来“响应”（Acknowledge）信号后，才开始通信。当然，这就要求主从模块之间增加两条应答线（即握手交互信号线Handshaking）。

   异步通信方式可分为**不互锁、半互锁和全互锁**三种类型，如图3.16所示。

   ![](读书笔记：计算机组成原理(唐朔飞)/31.png)

   （1）不互锁方式

   主模块发出请求信号后，不等待接到从模块的回答信号，而是经过一段时间，确认从模块已收到请求信号后，便撤消其请求信号；从设备接到请求信号后，在条件允许时发出回答信号，并且经过一段时间，确认主设备已收到回答信号后，自动撤消回答信号。可见通信双方并无互锁关系。

   （2）半互锁方式

   主模块发出请求信号，待接到从模块的回答信号后再撤消其请求信号，存在着简单的互锁关系；而从模块发出回答信号后，不等待主模块回答，在一段时间后便撤消其回答信号，无互锁关系。故称半互锁方式。

   （3）全互锁方式

   主模块发出请求信号，待从模块回答后再撤其请求信号；从模块发出回答信号，待主模块获知后，再撤消其回答信号。故称全互锁方式。

3. 半同步通信

   ![](读书笔记：计算机组成原理(唐朔飞)/32.png)

4.  分离式通信

   以上三种通信方式都是从主模块发出地址和读写命令开始，直到数据传输结束。在整个传输周期中，系统总线的使用权，完全由占有使用权的主模块和由它选中的从模块占据。进一步分析读命令传输周期，发现除了申请总线这一阶段外，其余时间主要被花在如下三个方面：

   （1）主模块通过传输总线向从模块发送地址和命令；

   （2）从模块按照命令进行读数据的必要准备；

   （3）从模块经数据总线向主模块提供数据。

   由（2）可见，对系统总线而言，从模块内部读出过程并无实质性的信息传输，纯属空闲等待。为了克服和利用这种消极等待，尤其在大型计算机系统中，总线的负载已处于饱和状态，充分挖掘系统总线每瞬间的潜力，对提高系统性能起到极大作用。为此人们提出了“分离式”的通信方式。其基本思想是将一个传输周期（或总线周期）分解为两个子周期。在第一个子周期中，主模块A在获得总线使用权后将命令、地址以及其他的有关信息，包括该主模块编号（当有多个主模块时，此编号尤为重要）发到系统总线上，经总线传输后，由有关的从模块B接收下来。主模块A向系统总线发布这些信息只占用总线很短的时间，一旦发送完，立即放弃总线使用权，以便其他模块使用。在第二个子周期中，当B模块收到A模块发来的有关命令信号后，经选择、译码、读取等一系列内部操作，将A模块所需的数据准备好，便由B模块申请总线使用权，一旦获准，B模块便将A模块的编号、B模块的地址，A模块所需的数据等一系列信息送到总线上，供A模块接收。很明显，上述两个传输子周期都只有单方向的信息流，每个模块都变成了主模块。

   这种通信方式的特点是：①各模块欲占用总线使用权都必须提出申请；②
   在得到总线使用权后，主模块在限定的时间内向对方传送信息，采用同步方式传送，不再等待对方的回答信号；③各模块在准备数据传送的过程中都不占用总线，使总线可接受其他模块的请求；④总线被占用时都在作有效工作，或者通过它发命令，或者通过它传送数据，不存在空闲等待时间，最充分地发挥了总线的有效占用。从而实现了总线为多个主从模块间进行信息交叉重叠并行式传送，这对大型计算机系统是极为重要的。当然，这种方式控制比较复杂，一般在普通微机系统很少采用。

   # 第四章：存储器

   本章重点介绍主存储器的分类、工作原理、组成方式以及与其他部件（如CPU）的联系。此外还介绍了高速缓冲存储器、磁表面存储器等的基本组成和工作原理。旨在使读者真正建立起如何用不同的存储器，组成具有层次结构的存储系统的概念。

   ## 概述
